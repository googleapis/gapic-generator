@extends "ruby/common.snip"
@extends "ruby/method_sample.snip"

@snippet generate(smokeTest)
  {@header(smokeTest.fileHeader)}

  {@testBody(smokeTest)}

@end

@private header(fileHeader)
  {@license(fileHeader)}

  @# AUTO GENERATED BY GAPIC

  {@importList(fileHeader.importSection.standardImports)}

  {@importList(fileHeader.importSection.appImports)}
@end

@private testBody(smokeTest)
@switch smokeTest.apiMethod.apiVersion
@case "Longrunning"
  describe "{@smokeTest.name}" do
@default
  describe "{@smokeTest.name} {@smokeTest.apiVersion}" do
@end

  it "runs one smoke test with {@smokeTest.apiMethod.name}" do
    @if smokeTest.requireProjectId
      unless ENV["{@smokeTest.projectIdVariableName}"]
        fail "{@smokeTest.projectIdVariableName} environment variable must be defined"
      end
      project_id = ENV["{@smokeTest.projectIdVariableName}"].freeze
    @end

    {@versionedClientSampleCode(smokeTest.apiMethod)}
  end
end
@end
