@extends "ruby/common.snip"
@extends "ruby/method_sample.snip"

@snippet generate(smokeTest)
  {@license(smokeTest.fileHeader)}

  @# AUTO GENERATED BY GAPIC

  require "minitest/autorun"
  require "minitest/spec"
  require "{@smokeTest.apiMethod.initCode.apiFileName}"

  {@testBody(smokeTest)}
@end

@private testBody(smokeTest)
describe "{@smokeTest.name}" do
  it "runs one smoke test with {@smokeTest.apiMethod.name}" do
    @if smokeTest.requireProjectId
      unless ENV["SMOKE_TEST_PROJECT"]
        fail "Usage: SMOKE_TEST_PROJECT=<project_id> ruby #{$0}"
      end
      project_id = ENV["SMOKE_TEST_PROJECT"].freeze
    @end

    {@sampleCodeCore(smokeTest.apiMethod)}
  end
end
@end
