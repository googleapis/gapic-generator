@extends "ruby/common.snip"
@extends "ruby/method_sample.snip"

@snippet generate(smokeTest)
  {@license(smokeTest.fileHeader)}

  @# AUTO GENERATED BY GAPIC

  require "minitest/autorun"
  require "minitest/spec"
  require "{@smokeTest.apiMethod.initCode.apiFileName}"

  {@testBody(smokeTest)}
@end

@private testBody(smokeTest)
describe "{@smokeTest.name}" do
  it "runs one smoke test with {@smokeTest.apiMethod.name}" do
    @if smokeTest.requireProjectId
      if ARGV.empty?
        fail "Usage: #{$0} <project_id>"
      end
      project_id = ARGV[0].freeze
    @end

    {@sampleCodeCore(smokeTest.apiMethod)}
  end
end
@end