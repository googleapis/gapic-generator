============== file: LICENSE ==============
                            Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

============== file: MANIFEST.in ==============
include README.rst LICENSE
global-include *.json
graft google
global-exclude *.py[co]
global-exclude __pycache__
prune .tox

============== file: PUBLISHING.rst ==============
PUBLISHING
----------

Note: This folder has been generated by the GAPIC code generator.

The instructions assumes that no changes have been made to folder and its
contents since it was created.

PREREQUISITES
-------------

- Python must installed
- [tox](https://testrun.org/tox/latest/) must be installed


TO PUBLISH
----------

- Make sure you have `an account`_ on pypi_.
- Publish your package using tox.
- *tox must be used here or the uploaded package will be invalid!!*

  ::

    tox -e upload-package


TO PUBLISH THE DOCS
-------------------

- Create the docs

  ::

    tox -e docs

- Publish them to pythonhosted.org

  ::

    tox -e upload-docs


_`Packaging and Distributing projects`: https://packaging.python.org/en/latest/distributing.html#uploading-your-project-to-pypi
_`an account`: https://pypi.python.org/pypi?%3Aaction=register_form
_pypi: http://pypi.python.org

============== file: README.rst ==============
Python Client for Google Example Library API (`Alpha`_)
=======================================================

`Google Example Library API`_: A simple Google Example Library API.

- `Client Library Documentation`_
- `Product Documentation`_

.. _Alpha: https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/README.rst
.. _Google Example Library API: https://cloud.google.com/library
.. _Client Library Documentation: https://googlecloudplatform.github.io/google-cloud-python/stable/library-usage
.. _Product Documentation:  https://cloud.google.com/library

Quick Start
-----------

In order to use this library, you first need to go through the following steps:

1. `Select or create a Cloud Platform project.`_
2. `Enable the Google Example Library API.`_
3. `Setup Authentication.`_

.. _Select or create a Cloud Platform project.: https://console.cloud.google.com/project
.. _Enable the Google Example Library API.:  https://cloud.google.com/library
.. _Setup Authentication.: https://googlecloudplatform.github.io/google-cloud-python/stable/google-cloud-auth

Installation
~~~~~~~~~~~~

Install this library in a `virtualenv`_ using pip. `virtualenv`_ is a tool to
create isolated Python environments. The basic problem it addresses is one of
dependencies and versions, and indirectly permissions.

With `virtualenv`_, it's possible to install this library without needing system
install permissions, and without clashing with the installed system
dependencies.

.. _`virtualenv`: https://virtualenv.pypa.io/en/latest/


Mac/Linux
^^^^^^^^^

.. code-block:: console

    pip install virtualenv
    virtualenv <your-env>
    source <your-env>/bin/activate
    <your-env>/bin/pip install google-cloud-library


Windows
^^^^^^^

.. code-block:: console

    pip install virtualenv
    virtualenv <your-env>
    <your-env>\Scripts\activate
    <your-env>\Scripts\pip.exe install google-cloud-library

Preview
~~~~~~~

LibraryServiceClient
^^^^^^^^^^^^^^^^^^^^

.. code:: py

    from google.cloud.example import library_v1

    client = library_v1.LibraryServiceClient()

    name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
    book = {}

    response = client.update_book(name, book)

Next Steps
~~~~~~~~~~

-  Read the `Client Library Documentation`_ for Google Example Library API
   API to see other available methods on the client.
-  Read the `Google Example Library API Product documentation`_ to learn
   more about the product and see How-to Guides.
-  View this `repository’s main README`_ to see the full list of Cloud
   APIs that we cover.

.. _Google Example Library API Product documentation:  https://cloud.google.com/library
.. _repository’s main README: https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/README.rst
============== file: docs/conf.py ==============
# -*- coding: utf-8 -*-
#
# google-cloud-library documentation build configuration file
#
# This file is execfile()d with the current directory set to its
# containing dir.
#
# Note that not all possible configuration values are present in this
# autogenerated file.
#
# All configuration values have a default; values that are commented out
# serve to show the default.

import sys
import os
import shlex

# If extensions (or modules to document with autodoc) are in another directory,
# add these directories to sys.path here. If the directory is relative to the
# documentation root, use os.path.abspath to make it absolute, like shown here.
sys.path.insert(0, os.path.abspath('..'))

__version__ = '0.15.0'

# -- General configuration ------------------------------------------------

# If your documentation needs a minimal Sphinx version, state it here.
#needs_sphinx = '1.0'

# Add any Sphinx extension module names here, as strings. They can be
# extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
# ones.
extensions = [
    'sphinx.ext.autodoc',
    'sphinx.ext.autosummary',
    'sphinx.ext.intersphinx',
    'sphinx.ext.coverage',
    'sphinx.ext.napoleon',
    'sphinx.ext.viewcode',
]

# autodoc/autosummary flags
autoclass_content = 'both'
autodoc_default_flags = ['members']
autosummary_generate = True


# Add any paths that contain templates here, relative to this directory.
templates_path = ['_templates']

# The suffix(es) of source filenames.
# You can specify multiple suffix as a list of string:
# source_suffix = ['.rst', '.md']
source_suffix = '.rst'

# The encoding of source files.
#source_encoding = 'utf-8-sig'

# The master toctree document.
master_doc = 'index'

# General information about the project.
project = u'google-cloud-library'
copyright = u'2017, Google'
author = u'Google APIs'

# The version info for the project you're documenting, acts as replacement for
# |version| and |release|, also used in various other places throughout the
# built documents.
#
# The full version, including alpha/beta/rc tags.
release = __version__
# The short X.Y version.
version = '.'.join(release.split('.')[0:2])

# The language for content autogenerated by Sphinx. Refer to documentation
# for a list of supported languages.
#
# This is also used if you do content translation via gettext catalogs.
# Usually you set "language" from the command line for these cases.
language = None

# There are two options for replacing |today|: either, you set today to some
# non-false value, then it is used:
#today = ''
# Else, today_fmt is used as the format for a strftime call.
#today_fmt = '%B %d, %Y'

# List of patterns, relative to source directory, that match files and
# directories to ignore when looking for source files.
exclude_patterns = ['_build']

# The reST default role (used for this markup: `text`) to use for all
# documents.
#default_role = None

# If true, '()' will be appended to :func: etc. cross-reference text.
#add_function_parentheses = True

# If true, the current module name will be prepended to all description
# unit titles (such as .. function::).
#add_module_names = True

# If true, sectionauthor and moduleauthor directives will be shown in the
# output. They are ignored by default.
#show_authors = False

# The name of the Pygments (syntax highlighting) style to use.
pygments_style = 'sphinx'

# A list of ignored prefixes for module index sorting.
#modindex_common_prefix = []

# If true, keep warnings as "system message" paragraphs in the built documents.
#keep_warnings = False

# If true, `todo` and `todoList` produce output, else they produce nothing.
todo_include_todos = True


# -- Options for HTML output ----------------------------------------------

# The theme to use for HTML and HTML Help pages.  See the documentation for
# a list of builtin themes.
html_theme = 'sphinx_rtd_theme'

# Theme options are theme-specific and customize the look and feel of a theme
# further.  For a list of options available for each theme, see the
# documentation.
#html_theme_options = {}

# Add any paths that contain custom themes here, relative to this directory.
#html_theme_path = []

# The name for this set of Sphinx documents.  If None, it defaults to
# "<project> v<release> documentation".
#html_title = None

# A shorter title for the navigation bar.  Default is the same as html_title.
#html_short_title = None

# The name of an image file (relative to this directory) to place at the top
# of the sidebar.
#html_logo = None

# The name of an image file (within the static path) to use as favicon of the
# docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
# pixels large.
#html_favicon = None

# Add any paths that contain custom static files (such as style sheets) here,
# relative to this directory. They are copied after the builtin static files,
# so a file named "default.css" will overwrite the builtin "default.css".
# html_static_path = []

# Add any extra paths that contain custom files (such as robots.txt or
# .htaccess) here, relative to this directory. These files are copied
# directly to the root of the documentation.
#html_extra_path = []

# If not '', a 'Last updated on:' timestamp is inserted at every page bottom,
# using the given strftime format.
#html_last_updated_fmt = '%b %d, %Y'

# If true, SmartyPants will be used to convert quotes and dashes to
# typographically correct entities.
#html_use_smartypants = True

# Custom sidebar templates, maps document names to template names.
#html_sidebars = {}

# Additional templates that should be rendered to pages, maps page names to
# template names.
#html_additional_pages = {}

# If false, no module index is generated.
#html_domain_indices = True

# If false, no index is generated.
#html_use_index = True

# If true, the index is split into individual pages for each letter.
#html_split_index = False

# If true, links to the reST sources are added to the pages.
#html_show_sourcelink = True

# If true, "Created using Sphinx" is shown in the HTML footer. Default is True.
#html_show_sphinx = True

# If true, "(C) Copyright ..." is shown in the HTML footer. Default is True.
#html_show_copyright = True

# If true, an OpenSearch description file will be output, and all pages will
# contain a <link> tag referring to it.  The value of this option must be the
# base URL from which the finished HTML is served.
#html_use_opensearch = ''

# This is the file name suffix for HTML files (e.g. ".xhtml").
#html_file_suffix = None

# Language to be used for generating the HTML full-text search index.
# Sphinx supports the following languages:
#   'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'
#   'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'
#html_search_language = 'en'

# A dictionary with options for the search language support, empty by default.
# Now only 'ja' uses this config value
#html_search_options = {'type': 'default'}

# The name of a javascript file (relative to the configuration directory) that
# implements a search results scorer. If empty, the default will be used.
#html_search_scorer = 'scorer.js'

# Output file base name for HTML help builder.
htmlhelp_basename = 'google-cloud-library-doc'

# -- Options for LaTeX output ---------------------------------------------

latex_elements = {
# The paper size ('letterpaper' or 'a4paper').
#'papersize': 'letterpaper',

# The font size ('10pt', '11pt' or '12pt').
#'pointsize': '10pt',

# Additional stuff for the LaTeX preamble.
#'preamble': '',

# Latex figure (float) alignment
#'figure_align': 'htbp',
}

# Grouping the document tree into LaTeX files. List of tuples
# (source start file, target name, title,
#  author, documentclass [howto, manual, or own class]).
latex_documents = [
  (master_doc, 'google-cloud-library.tex', u'google-cloud-library Documentation',
   author, 'manual'),
]

# The name of an image file (relative to this directory) to place at the top of
# the title page.
#latex_logo = None

# For "manual" documents, if this is true, then toplevel headings are parts,
# not chapters.
#latex_use_parts = False

# If true, show page references after internal links.
#latex_show_pagerefs = False

# If true, show URL addresses after external links.
#latex_show_urls = False

# Documents to append as an appendix to all manuals.
#latex_appendices = []

# If false, no module index is generated.
#latex_domain_indices = True


# -- Options for manual page output ---------------------------------------

# One entry per manual page. List of tuples
# (source start file, name, description, authors, manual section).
man_pages = [
    (master_doc, 'google-cloud-library', u'google-cloud-library Documentation',
     [author], 1)
]

# If true, show URL addresses after external links.
#man_show_urls = False


# -- Options for Texinfo output -------------------------------------------

# Grouping the document tree into Texinfo files. List of tuples
# (source start file, target name, title, author,
#  dir menu entry, description, category)
texinfo_documents = [
  (master_doc, 'google-cloud-library', u'google-cloud-library Documentation',
   author, 'google-cloud-library', 'GAPIC library for the {metadata.shortName} v1 service',
   'APIs'),
]

# Documents to append as an appendix to all manuals.
#texinfo_appendices = []

# If false, no module index is generated.
#texinfo_domain_indices = True

# How to display URL addresses: 'footnote', 'no', or 'inline'.
#texinfo_show_urls = 'footnote'

# If true, do not generate a @detailmenu in the "Top" node's menu.
#texinfo_no_detailmenu = False


# Example configuration for intersphinx: refer to the Python standard library.
intersphinx_mapping = {
    'python': ('http://python.readthedocs.org/en/latest/', None),
    'gax': ('https://gax-python.readthedocs.org/en/latest/', None),
}


# Napoleon settings
napoleon_google_docstring = True
napoleon_numpy_docstring = True
napoleon_include_private_with_doc = False
napoleon_include_special_with_doc = True
napoleon_use_admonition_for_examples = False
napoleon_use_admonition_for_notes = False
napoleon_use_admonition_for_references = False
napoleon_use_ivar = False
napoleon_use_param = True
napoleon_use_rtype = True

============== file: docs/gapic/v1/api.rst ==============
Client for Google Example Library API
=====================================

.. automodule:: google.cloud.example.library_v1
    :members:
    :inherited-members:
============== file: docs/gapic/v1/types.rst ==============
Types for Google Example Library API Client
===========================================

.. automodule:: google.cloud.example.library_v1.types
    :members:
============== file: docs/index.rst ==============
Python Client for Google Example Library API (`Alpha`_)
=======================================================

`Google Example Library API`_: A simple Google Example Library API.

- `Client Library Documentation`_
- `Product Documentation`_

.. _Alpha: https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/README.rst
.. _Google Example Library API: https://cloud.google.com/library
.. _Client Library Documentation: https://googlecloudplatform.github.io/google-cloud-python/stable/library-usage
.. _Product Documentation:  https://cloud.google.com/library

Quick Start
-----------

In order to use this library, you first need to go through the following steps:

1. `Select or create a Cloud Platform project.`_
2. `Enable the Google Example Library API.`_
3. `Setup Authentication.`_

.. _Select or create a Cloud Platform project.: https://console.cloud.google.com/project
.. _Enable the Google Example Library API.:  https://cloud.google.com/library
.. _Setup Authentication.: https://googlecloudplatform.github.io/google-cloud-python/stable/google-cloud-auth

Installation
~~~~~~~~~~~~

Install this library in a `virtualenv`_ using pip. `virtualenv`_ is a tool to
create isolated Python environments. The basic problem it addresses is one of
dependencies and versions, and indirectly permissions.

With `virtualenv`_, it's possible to install this library without needing system
install permissions, and without clashing with the installed system
dependencies.

.. _`virtualenv`: https://virtualenv.pypa.io/en/latest/


Mac/Linux
^^^^^^^^^

.. code-block:: console

    pip install virtualenv
    virtualenv <your-env>
    source <your-env>/bin/activate
    <your-env>/bin/pip install google-cloud-library


Windows
^^^^^^^

.. code-block:: console

    pip install virtualenv
    virtualenv <your-env>
    <your-env>\Scripts\activate
    <your-env>\Scripts\pip.exe install google-cloud-library

Preview
~~~~~~~

LibraryServiceClient
^^^^^^^^^^^^^^^^^^^^

.. code:: py

    from google.cloud.example import library_v1

    client = library_v1.LibraryServiceClient()

    name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
    book = {}

    response = client.update_book(name, book)

Next Steps
~~~~~~~~~~

-  Read the `Client Library Documentation`_ for Google Example Library API
   API to see other available methods on the client.
-  Read the `Google Example Library API Product documentation`_ to learn
   more about the product and see How-to Guides.
-  View this `repository’s main README`_ to see the full list of Cloud
   APIs that we cover.

.. _Google Example Library API Product documentation:  https://cloud.google.com/library
.. _repository’s main README: https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/README.rst

Api Reference
-------------
.. toctree::
    :maxdepth: 2

    gapic/v1/api
    gapic/v1/types
============== file: google/__init__.py ==============
__import__('pkg_resources').declare_namespace(__name__)

============== file: google/cloud/__init__.py ==============
__import__('pkg_resources').declare_namespace(__name__)

============== file: google/cloud/example/__init__.py ==============
__import__('pkg_resources').declare_namespace(__name__)

============== file: google/cloud/example/library.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


from __future__ import absolute_import

from google.cloud.example.library_v1 import LibraryServiceClient
from google.cloud.example.library_v1 import enums
from google.cloud.example.library_v1 import types


__all__ = (
    'enums',
    'types',
    'LibraryServiceClient',
)
============== file: google/cloud/example/library_v1/__init__.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


from __future__ import absolute_import

from google.cloud.example.library_v1 import types
from google.cloud.example.library_v1.gapic import enums
from google.cloud.example.library_v1.gapic import library_service_client


class LibraryServiceClient(library_service_client.LibraryServiceClient):
    __doc__ = library_service_client.LibraryServiceClient.__doc__
    enums = enums


__all__ = (
    'enums',
    'types',
    'LibraryServiceClient',
)
============== file: google/cloud/example/library_v1/gapic/__init__.py ==============

============== file: google/cloud/example/library_v1/gapic/enums.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

"""Wrappers for protocol buffer enum types."""


class NullValue(object):
    """
    ``NullValue`` is a singleton enumeration to represent the null value for the
    ``Value`` type union.

     The JSON representation for ``NullValue`` is JSON ``null``.

    Attributes:
      NULL_VALUE (int): Null value.
    """
    NULL_VALUE = 0


class FieldMask(object):
    class Material(object):
        """
        Attributes:
          PAPIER_MACHE (int)
          WOOD (int)
          PORCELAIN (int)
          SEQUINS (int)
          CARDBOARD (int)
        """
        PAPIER_MACHE = 0
        WOOD = 1
        PORCELAIN = 2
        SEQUINS = 3
        CARDBOARD = 4


class Book(object):
    class Rating(object):
        """
        Attributes:
          GOOD (int): GOOD enum description
          BAD (int): Enum description with special characters: <>&\"``'@.
        """
        GOOD = 0
        BAD = 1


class SomeMessage(object):
    class Alignment(object):
        """
        Tests service with two enums of the same simple name

        Attributes:
          GOOD (int)
          NEUTRAL (int)
          EVIL (int)
        """
        GOOD = 0
        NEUTRAL = 1
        EVIL = 2


class SomeMessage2(object):
    class Alignment(object):
        """
        Another enum with duplicated simple name

        Attributes:
          FLUSH_LEFT (int)
          FLUSH_RIGHT (int)
          CENTERED (int)
          JUSTIFIED (int)
        """
        FLUSH_LEFT = 0
        FLUSH_RIGHT = 1
        CENTERED = 2
        JUSTIFIED = 3


    class SomeMessage3(object):
        class Alignment(object):
            """
            Tests Python nested enums

            Attributes:
              CHAR (int): 8-bit
              INT (int): 32-bit
              DOUBLE (int): 64-bit
            """
            CHAR = 0
            INT = 1
            DOUBLE = 2


class Comment(object):
    class Stage(object):
        """
        Attributes:
          UNSET (int)
          DRAFT (int)
          PUBLISHED (int)
          DELETED (int)
        """
        UNSET = 0
        DRAFT = 1
        PUBLISHED = 2
        DELETED = 3


class TestOptionalRequiredFlatteningParamsRequest(object):
    class InnerEnum(object):
        """
        For testing all types, plus resource-names, as required and optional.

        Attributes:
          ZERO (int)
          ONE (int)
        """
        ZERO = 0
        ONE = 1
    
============== file: google/cloud/example/library_v1/gapic/library_service_client.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# EDITING INSTRUCTIONS
# This file was generated from the file
# https://github.com/google/googleapis/blob/master/library.proto,
# and updates to that file get reflected here through a refresh process.
# For the short term, the refresh process will only be runnable by Google engineers.
#
# The only allowed edits are to method and file documentation. A 3-way
# merge preserves those additions if the generated source changes.

"""Accesses the google.example.library.v1 LibraryService API."""

import collections
import json
import os
import pkg_resources
import platform

from google.gapic.longrunning import operations_client
from google.gax import api_callable
from google.gax import config
from google.gax import path_template
from google.gax.utils import oneof
import google.gax

from google.cloud.example.library_v1.gapic import enums
from google.cloud.example.library_v1.gapic import library_service_client_config
from google.cloud.proto.example.library.v1 import field_mask_pb2 as v1_field_mask_pb2
from google.cloud.proto.example.library.v1 import library_pb2
from google.cloud.proto.tagger.v1 import tagger_pb2
from google.protobuf import empty_pb2
from google.protobuf import field_mask_pb2 as protobuf_field_mask_pb2


_PageDesc = google.gax.PageDescriptor


class LibraryServiceClient(object):
    """
    This API represents a simple digital library.  It lets you manage Shelf
    resources and Book resources in the library. It defines the following
    resource model:

    - The API has a collection of ``Shelf``
      resources, named ``bookShelves/*``

    - Each Shelf has a collection of ``Book``
      resources, named ``bookShelves/*/books/*``

    Check out `cloud docs! <https://cloud.google.com/library/example/link>`_.
    This is `not a cloud link <http://www.google.com>`_.

    Service comment may include special characters: <>&\"``'@.
    """

    SERVICE_ADDRESS = 'library-example.googleapis.com'
    """The default address of the service."""

    DEFAULT_SERVICE_PORT = 443
    """The default port of the service."""

    _PAGE_DESCRIPTORS = {
        'list_shelves': _PageDesc(
            'page_token',
            'next_page_token',
            'shelves'
        ),
        'list_books': _PageDesc(
            'page_token',
            'next_page_token',
            'books'
        ),
        'list_strings': _PageDesc(
            'page_token',
            'next_page_token',
            'strings'
        ),
        'find_related_books': _PageDesc(
            'page_token',
            'next_page_token',
            'names'
        )
    }

    # The scopes needed to make gRPC calls to all of the methods defined in
    # this service
    _ALL_SCOPES = (
        'https://www.googleapis.com/auth/cloud-platform',
        'https://www.googleapis.com/auth/library',
    )

    _SHELF_PATH_TEMPLATE = path_template.PathTemplate(
        'shelves/{shelf_id}')
    _BOOK_PATH_TEMPLATE = path_template.PathTemplate(
        'shelves/{shelf_id}/books/{book_id}')
    _RETURN_PATH_TEMPLATE = path_template.PathTemplate(
        'shelves/{shelf}/books/{book}/returns/{return}')

    @classmethod
    def shelf_path(cls, shelf_id):
        """Returns a fully-qualified shelf resource name string."""
        return cls._SHELF_PATH_TEMPLATE.render({
            'shelf_id': shelf_id,
        })

    @classmethod
    def book_path(cls, shelf_id, book_id):
        """Returns a fully-qualified book resource name string."""
        return cls._BOOK_PATH_TEMPLATE.render({
            'shelf_id': shelf_id,
            'book_id': book_id,
        })

    @classmethod
    def return_path(cls, shelf, book, return_):
        """Returns a fully-qualified return resource name string."""
        return cls._RETURN_PATH_TEMPLATE.render({
            'shelf': shelf,
            'book': book,
            'return': return_,
        })

    @classmethod
    def match_shelf_id_from_shelf_name(cls, shelf_name):
        """Parses the shelf_id from a shelf resource.

        Args:
          shelf_name (string): A fully-qualified path representing a shelf
            resource.

        Returns:
          A string representing the shelf_id.
        """
        return cls._SHELF_PATH_TEMPLATE.match(shelf_name).get('shelf_id')

    @classmethod
    def match_shelf_id_from_book_name(cls, book_name):
        """Parses the shelf_id from a book resource.

        Args:
          book_name (string): A fully-qualified path representing a book
            resource.

        Returns:
          A string representing the shelf_id.
        """
        return cls._BOOK_PATH_TEMPLATE.match(book_name).get('shelf_id')

    @classmethod
    def match_book_id_from_book_name(cls, book_name):
        """Parses the book_id from a book resource.

        Args:
          book_name (string): A fully-qualified path representing a book
            resource.

        Returns:
          A string representing the book_id.
        """
        return cls._BOOK_PATH_TEMPLATE.match(book_name).get('book_id')

    @classmethod
    def match_shelf_from_return_name(cls, return_name):
        """Parses the shelf from a return resource.

        Args:
          return_name (string): A fully-qualified path representing a return
            resource.

        Returns:
          A string representing the shelf.
        """
        return cls._RETURN_PATH_TEMPLATE.match(return_name).get('shelf')

    @classmethod
    def match_book_from_return_name(cls, return_name):
        """Parses the book from a return resource.

        Args:
          return_name (string): A fully-qualified path representing a return
            resource.

        Returns:
          A string representing the book.
        """
        return cls._RETURN_PATH_TEMPLATE.match(return_name).get('book')

    @classmethod
    def match_return_from_return_name(cls, return_name):
        """Parses the return from a return resource.

        Args:
          return_name (string): A fully-qualified path representing a return
            resource.

        Returns:
          A string representing the return.
        """
        return cls._RETURN_PATH_TEMPLATE.match(return_name).get('return')

    def __init__(self,
            service_path=SERVICE_ADDRESS,
            port=DEFAULT_SERVICE_PORT,
            channel=None,
            credentials=None,
            ssl_credentials=None,
            scopes=None,
            client_config=None,
            app_name=None,
            app_version='',
            lib_name=None,
            lib_version='',
            metrics_headers=()):
        """Constructor.

        Args:
          service_path (string): The domain name of the API remote host.
          port (int): The port on which to connect to the remote host.
          channel (:class:`grpc.Channel`): A ``Channel`` instance through
            which to make calls.
          credentials (object): The authorization credentials to attach to
            requests. These credentials identify this application to the
            service.
          ssl_credentials (:class:`grpc.ChannelCredentials`): A
            ``ChannelCredentials`` instance for use with an SSL-enabled
            channel.
          scopes (list[string]): A list of OAuth2 scopes to attach to requests.
          client_config (dict):
            A dictionary for call options for each method. See
            :func:`google.gax.construct_settings` for the structure of
            this data. Falls back to the default config if not specified
            or the specified config is missing data points.
          app_name (string): The name of the application calling
            the service. Recommended for analytics purposes.
          app_version (string): The version of the application calling
            the service. Recommended for analytics purposes.
          lib_name (string): The API library software used for calling
            the service. (Unless you are writing an API client itself,
            leave this as default.)
          lib_version (string): The API library software version used
            for calling the service. (Unless you are writing an API client
            itself, leave this as default.)
          metrics_headers (dict): A dictionary of values for tracking
            client library metrics. Ultimately serializes to a string
            (e.g. 'foo/1.2.3 bar/3.14.1'). This argument should be
            considered private.

        Returns:
          A LibraryServiceClient object.
        """
        # Unless the calling application specifically requested
        # OAuth scopes, request everything.
        if scopes is None:
            scopes = self._ALL_SCOPES

        # Initialize an empty client config, if none is set.
        if client_config is None:
            client_config = {}

        # Initialize metrics_headers as an ordered dictionary
        # (cuts down on cardinality of the resulting string slightly).
        metrics_headers = collections.OrderedDict(metrics_headers)
        metrics_headers['gl-python'] = platform.python_version()

        # The library may or may not be set, depending on what is
        # calling this client. Newer client libraries set the library name
        # and version.
        if lib_name:
            metrics_headers[lib_name] = lib_version

        # Finally, track the GAPIC package version.
        metrics_headers['gapic'] = pkg_resources.get_distribution(
            'google-cloud-library',
        ).version

        # Load the configuration defaults.
        defaults = api_callable.construct_settings(
            'google.example.library.v1.LibraryService',
            library_service_client_config.config,
            client_config,
            config.STATUS_CODE_NAMES,
            metrics_headers=metrics_headers,
            page_descriptors=self._PAGE_DESCRIPTORS,
        )
        self.library_service_stub = config.create_stub(
            library_pb2.LibraryServiceStub,
            channel=channel,
            service_path=service_path,
            service_port=port,
            credentials=credentials,
            scopes=scopes,
            ssl_credentials=ssl_credentials)
        self.labeler_stub = config.create_stub(
            tagger_pb2.LabelerStub,
            channel=channel,
            service_path=service_path,
            service_port=port,
            credentials=credentials,
            scopes=scopes,
            ssl_credentials=ssl_credentials)

        self.operations_client = operations_client.OperationsClient(
            service_path=service_path,
            port=port,
            channel=channel,
            credentials=credentials,
            ssl_credentials=ssl_credentials,
            scopes=scopes,
            client_config=client_config,
            metrics_headers=metrics_headers,
        )

        self._create_shelf = api_callable.create_api_call(
            self.library_service_stub.CreateShelf,
            settings=defaults['create_shelf'])
        self._get_shelf = api_callable.create_api_call(
            self.library_service_stub.GetShelf,
            settings=defaults['get_shelf'])
        self._list_shelves = api_callable.create_api_call(
            self.library_service_stub.ListShelves,
            settings=defaults['list_shelves'])
        self._delete_shelf = api_callable.create_api_call(
            self.library_service_stub.DeleteShelf,
            settings=defaults['delete_shelf'])
        self._merge_shelves = api_callable.create_api_call(
            self.library_service_stub.MergeShelves,
            settings=defaults['merge_shelves'])
        self._create_book = api_callable.create_api_call(
            self.library_service_stub.CreateBook,
            settings=defaults['create_book'])
        self._publish_series = api_callable.create_api_call(
            self.library_service_stub.PublishSeries,
            settings=defaults['publish_series'])
        self._get_book = api_callable.create_api_call(
            self.library_service_stub.GetBook,
            settings=defaults['get_book'])
        self._list_books = api_callable.create_api_call(
            self.library_service_stub.ListBooks,
            settings=defaults['list_books'])
        self._delete_book = api_callable.create_api_call(
            self.library_service_stub.DeleteBook,
            settings=defaults['delete_book'])
        self._update_book = api_callable.create_api_call(
            self.library_service_stub.UpdateBook,
            settings=defaults['update_book'])
        self._move_book = api_callable.create_api_call(
            self.library_service_stub.MoveBook,
            settings=defaults['move_book'])
        self._list_strings = api_callable.create_api_call(
            self.library_service_stub.ListStrings,
            settings=defaults['list_strings'])
        self._add_comments = api_callable.create_api_call(
            self.library_service_stub.AddComments,
            settings=defaults['add_comments'])
        self._get_book_from_archive = api_callable.create_api_call(
            self.library_service_stub.GetBookFromArchive,
            settings=defaults['get_book_from_archive'])
        self._get_book_from_anywhere = api_callable.create_api_call(
            self.library_service_stub.GetBookFromAnywhere,
            settings=defaults['get_book_from_anywhere'])
        self._get_book_from_absolutely_anywhere = api_callable.create_api_call(
            self.library_service_stub.GetBookFromAbsolutelyAnywhere,
            settings=defaults['get_book_from_absolutely_anywhere'])
        self._update_book_index = api_callable.create_api_call(
            self.library_service_stub.UpdateBookIndex,
            settings=defaults['update_book_index'])
        self._stream_shelves = api_callable.create_api_call(
            self.library_service_stub.StreamShelves,
            settings=defaults['stream_shelves'])
        self._stream_books = api_callable.create_api_call(
            self.library_service_stub.StreamBooks,
            settings=defaults['stream_books'])
        self._discuss_book = api_callable.create_api_call(
            self.library_service_stub.DiscussBook,
            settings=defaults['discuss_book'])
        self._monolog_about_book = api_callable.create_api_call(
            self.library_service_stub.MonologAboutBook,
            settings=defaults['monolog_about_book'])
        self._find_related_books = api_callable.create_api_call(
            self.library_service_stub.FindRelatedBooks,
            settings=defaults['find_related_books'])
        self._add_tag = api_callable.create_api_call(
            self.library_service_stub.AddTag,
            settings=defaults['add_tag'])
        self._add_label = api_callable.create_api_call(
            self.labeler_stub.AddLabel,
            settings=defaults['add_label'])
        self._get_big_book = api_callable.create_api_call(
            self.library_service_stub.GetBigBook,
            settings=defaults['get_big_book'])
        self._get_big_nothing = api_callable.create_api_call(
            self.library_service_stub.GetBigNothing,
            settings=defaults['get_big_nothing'])
        self._test_optional_required_flattening_params = api_callable.create_api_call(
            self.library_service_stub.TestOptionalRequiredFlatteningParams,
            settings=defaults['test_optional_required_flattening_params'])

    # Service calls
    def create_shelf(
            self,
            shelf,
            options=None):
        """
        Creates a shelf, and returns the new Shelf.
        RPC method comment may include special characters: <>&\"``'@.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> shelf = {}
          >>>
          >>> response = client.create_shelf(shelf)

        Args:
          shelf (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Shelf`]): The shelf to create.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf`
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.CreateShelfRequest(
            shelf=shelf)
        return self._create_shelf(request, options)

    def get_shelf(
            self,
            name,
            options_,
            message=None,
            string_builder=None,
            options=None):
        """
        Gets a shelf.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.shelf_path('[SHELF_ID]')
          >>> options_ = ''
          >>>
          >>> response = client.get_shelf(name, options_)

        Args:
          name (str): The name of the shelf to retrieve.
          options_ (str): To test 'options' parameter name conflict.
          message (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.SomeMessage`]): Field to verify that message-type query parameter gets flattened.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.SomeMessage`
          string_builder (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.StringBuilder`]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.StringBuilder`
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetShelfRequest(
            name=name,
            options=options_,
            message=message,
            string_builder=string_builder)
        return self._get_shelf(request, options)

    def list_shelves(
            self,
            options=None):
        """
        Lists shelves.

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.gax import CallOptions, INITIAL_PAGE
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>>
          >>> # Iterate over all results
          >>> for element in client.list_shelves():
          >>>     # process element
          >>>     pass
          >>>
          >>> # Or iterate over results one page at a time
          >>> for page in client.list_shelves(options=CallOptions(page_token=INITIAL_PAGE)):
          >>>     for element in page:
          >>>         # process element
          >>>         pass

        Args:
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax.PageIterator` instance. By default, this
          is an iterable of :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf` instances.
          This object can also be configured to iterate over the pages
          of the response through the `CallOptions` parameter.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
        """
        request = library_pb2.ListShelvesRequest()
        return self._list_shelves(request, options)

    def delete_shelf(
            self,
            name,
            options=None):
        """
        Deletes a shelf.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.shelf_path('[SHELF_ID]')
          >>>
          >>> client.delete_shelf(name)

        Args:
          name (str): The name of the shelf to delete.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.DeleteShelfRequest(
            name=name)
        self._delete_shelf(request, options)

    def merge_shelves(
            self,
            name,
            other_shelf_name,
            options=None):
        """
        Merges two shelves by adding all books from the shelf named
        ``other_shelf_name`` to shelf ``name``, and deletes
        ``other_shelf_name``. Returns the updated shelf.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.shelf_path('[SHELF_ID]')
          >>> other_shelf_name = client.shelf_path('[SHELF_ID]')
          >>>
          >>> response = client.merge_shelves(name, other_shelf_name)

        Args:
          name (str): The name of the shelf we're adding books to.
          other_shelf_name (str): The name of the shelf we're removing books from and deleting.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.MergeShelvesRequest(
            name=name,
            other_shelf_name=other_shelf_name)
        return self._merge_shelves(request, options)

    def create_book(
            self,
            name,
            book,
            options=None):
        """
        Creates a book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.shelf_path('[SHELF_ID]')
          >>> book = {}
          >>>
          >>> response = client.create_book(name, book)

        Args:
          name (str): The name of the shelf in which the book is created.
          book (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Book`]): The book to create.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Book`
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Book` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.CreateBookRequest(
            name=name,
            book=book)
        return self._create_book(request, options)

    def publish_series(
            self,
            shelf,
            books,
            series_uuid,
            edition=None,
            review_copy=None,
            options=None):
        """
        Creates a series of books.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> shelf = {}
          >>> books = []
          >>> series_string = 'foobar'
          >>> series_uuid = {'series_string': series_string}
          >>>
          >>> response = client.publish_series(shelf, books, series_uuid)

        Args:
          shelf (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Shelf`]): The shelf in which the series is created.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Shelf`
          books (list[Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Book`]]): The books to publish in the series.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Book`
          series_uuid (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.SeriesUuid`]): Uniquely identifies the series to the publishing house.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.SeriesUuid`
          edition (int): The edition of the series
          review_copy (bool): If the book is in a pre-publish state
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.PublishSeriesResponse` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        # Sanity check: We have some fields which are mutually exclusive;
        # raise ValueError if more than one is sent.
        oneof.check_oneof(
            edition=edition,
            review_copy=review_copy,
        )

        request = library_pb2.PublishSeriesRequest(
            shelf=shelf,
            books=books,
            series_uuid=series_uuid,
            edition=edition,
            review_copy=review_copy)
        return self._publish_series(request, options)

    def get_book(
            self,
            name,
            options=None):
        """
        Gets a book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> response = client.get_book(name)

        Args:
          name (str): The name of the book to retrieve.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Book` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookRequest(
            name=name)
        return self._get_book(request, options)

    def list_books(
            self,
            name,
            page_size=None,
            filter_=None,
            options=None):
        """
        Lists books in a shelf.

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.gax import CallOptions, INITIAL_PAGE
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.shelf_path('[SHELF_ID]')
          >>>
          >>>
          >>> # Iterate over all results
          >>> for element in client.list_books(name):
          >>>     # process element
          >>>     pass
          >>>
          >>> # Or iterate over results one page at a time
          >>> for page in client.list_books(name, options=CallOptions(page_token=INITIAL_PAGE)):
          >>>     for element in page:
          >>>         # process element
          >>>         pass

        Args:
          name (str): The name of the shelf whose books we'd like to list.
          page_size (int): The maximum number of resources contained in the
            underlying API response. If page streaming is performed per-
            resource, this parameter does not affect the return value. If page
            streaming is performed per-page, this determines the maximum number
            of resources in a page.
          filter_ (str): To test python built-in wrapping.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax.PageIterator` instance. By default, this
          is an iterable of :class:`google.cloud.proto.example.library.v1.library_pb2.Book` instances.
          This object can also be configured to iterate over the pages
          of the response through the `CallOptions` parameter.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.ListBooksRequest(
            name=name,
            page_size=page_size,
            filter=filter_)
        return self._list_books(request, options)

    def delete_book(
            self,
            name,
            options=None):
        """
        Deletes a book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> client.delete_book(name)

        Args:
          name (str): The name of the book to delete.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.DeleteBookRequest(
            name=name)
        self._delete_book(request, options)

    def update_book(
            self,
            name,
            book,
            update_mask=None,
            physical_mask=None,
            options=None):
        """
        Updates a book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> book = {}
          >>>
          >>> response = client.update_book(name, book)

        Args:
          name (str): The name of the book to update.
          book (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Book`]): The book to update with.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Book`
          update_mask (Union[dict|:class:`google.protobuf.field_mask_pb2.FieldMask`]): A field mask to apply, rendered as an HTTP parameter.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.protobuf.field_mask_pb2.FieldMask`
          physical_mask (Union[dict|:class:`google.cloud.proto.example.library.v1.field_mask_pb2.FieldMask`]): To test Python import clash resolution.
            If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.field_mask_pb2.FieldMask`
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Book` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.UpdateBookRequest(
            name=name,
            book=book,
            update_mask=update_mask,
            physical_mask=physical_mask)
        return self._update_book(request, options)

    def move_book(
            self,
            name,
            other_shelf_name,
            options=None):
        """
        Moves a book to another shelf, and returns the new book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> other_shelf_name = client.shelf_path('[SHELF_ID]')
          >>>
          >>> response = client.move_book(name, other_shelf_name)

        Args:
          name (str): The name of the book to move.
          other_shelf_name (str): The name of the destination shelf.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Book` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.MoveBookRequest(
            name=name,
            other_shelf_name=other_shelf_name)
        return self._move_book(request, options)

    def list_strings(
            self,
            name=None,
            page_size=None,
            options=None):
        """
        Lists a primitive resource. To test go page streaming.

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.gax import CallOptions, INITIAL_PAGE
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>>
          >>> # Iterate over all results
          >>> for element in client.list_strings():
          >>>     # process element
          >>>     pass
          >>>
          >>> # Or iterate over results one page at a time
          >>> for page in client.list_strings(options=CallOptions(page_token=INITIAL_PAGE)):
          >>>     for element in page:
          >>>         # process element
          >>>         pass

        Args:
          name (str)
          page_size (int): The maximum number of resources contained in the
            underlying API response. If page streaming is performed per-
            resource, this parameter does not affect the return value. If page
            streaming is performed per-page, this determines the maximum number
            of resources in a page.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax.PageIterator` instance. By default, this
          is an iterable of str instances.
          This object can also be configured to iterate over the pages
          of the response through the `CallOptions` parameter.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.ListStringsRequest(
            name=name,
            page_size=page_size)
        return self._list_strings(request, options)

    def add_comments(
            self,
            name,
            comments,
            options=None):
        """
        Adds comments to a book

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.cloud.example.library_v1 import enums
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> comment = b''
          >>> stage = enums.Comment.Stage.UNSET
          >>> alignment = enums.SomeMessage2.SomeMessage3.Alignment.CHAR
          >>> comments_element = {'comment': comment, 'stage': stage, 'alignment': alignment}
          >>> comments = [comments_element]
          >>>
          >>> client.add_comments(name, comments)

        Args:
          name (str)
          comments (list[Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.Comment`]]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.Comment`
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.AddCommentsRequest(
            name=name,
            comments=comments)
        self._add_comments(request, options)

    def get_book_from_archive(
            self,
            name,
            options=None):
        """
        Gets a book from an archive.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.archived_book_path('[ARCHIVE_PATH]', '[BOOK_ID]')
          >>>
          >>> response = client.get_book_from_archive(name)

        Args:
          name (str): The name of the book to retrieve.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.BookFromArchive` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookFromArchiveRequest(
            name=name)
        return self._get_book_from_archive(request, options)

    def get_book_from_anywhere(
            self,
            name,
            alt_book_name,
            options=None):
        """
        Gets a book from a shelf or archive.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> alt_book_name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> response = client.get_book_from_anywhere(name, alt_book_name)

        Args:
          name (str): The name of the book to retrieve.
          alt_book_name (str): An alternate book name, used to test restricting flattened field to a
            single resource name type in a oneof.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.book_from_anywhere_pb2.BookFromAnywhere` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookFromAnywhereRequest(
            name=name,
            alt_book_name=alt_book_name)
        return self._get_book_from_anywhere(request, options)

    def get_book_from_absolutely_anywhere(
            self,
            name,
            options=None):
        """
        Test proper OneOf-Any resource name mapping

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> response = client.get_book_from_absolutely_anywhere(name)

        Args:
          name (str): The name of the book to retrieve.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.book_from_anywhere_pb2.BookFromAnywhere` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookFromAbsolutelyAnywhereRequest(
            name=name)
        return self._get_book_from_absolutely_anywhere(request, options)

    def update_book_index(
            self,
            name,
            index_name,
            index_map,
            options=None):
        """
        Updates the index of a book.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> index_name = 'default index'
          >>> index_map_item = ''
          >>> index_map = {'default_key': index_map_item}
          >>>
          >>> client.update_book_index(name, index_name, index_map)

        Args:
          name (str): The name of the book to update.
          index_name (str): The name of the index for the book
          index_map (dict[str -> str]): The index to update the book with
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.UpdateBookIndexRequest(
            name=name,
            index_name=index_name,
            index_map=index_map)
        self._update_book_index(request, options)

    def stream_shelves(
            self,
            options=None):
        """
        Test server streaming
        gRPC streaming methods don't have an HTTP equivalent and don't need to have the google.api.http option.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> for element in client.stream_shelves():
          >>>     # process element
          >>>     pass

        Args:
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          Iterable[:class:`google.cloud.proto.example.library.v1.library_pb2.StreamShelvesResponse`].

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
        """
        request = library_pb2.StreamShelvesRequest()
        return self._stream_shelves(request, options)

    def stream_books(
            self,
            name,
            options=None):
        """
        Test server streaming, non-paged responses.
        gRPC streaming methods don't have an HTTP equivalent and don't need to have the google.api.http option.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = ''
          >>>
          >>> for element in client.stream_books(name):
          >>>     # process element
          >>>     pass

        Args:
          name (str): The name of the shelf whose books we'd like to list.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          Iterable[:class:`google.cloud.proto.example.library.v1.library_pb2.Book`].

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.StreamBooksRequest(
            name=name)
        return self._stream_books(request, options)

    def discuss_book(
            self,
            requests,
            options=None):
        """
        Test bidi-streaming.
        gRPC streaming methods don't have an HTTP equivalent and don't need to have the google.api.http option.

        EXPERIMENTAL: This method interface might change in the future.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = ''
          >>> request = {'name': name}
          >>>
          >>> requests = [request]
          >>> for element in client.discuss_book(requests):
          >>>     # process element
          >>>     pass

        Args:
          requests (iterator[:class:`google.cloud.proto.example.library.v1.library_pb2.DiscussBookRequest`]): The input objects.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          Iterable[:class:`google.cloud.proto.example.library.v1.library_pb2.Comment`].

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        return self._discuss_book(requests, options)

    def monolog_about_book(
            self,
            requests,
            options=None):
        """
        Test client streaming.
        gRPC streaming methods don't have an HTTP equivalent and don't need to have the google.api.http option.

        EXPERIMENTAL: This method interface might change in the future.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = ''
          >>> request = {'name': name}
          >>>
          >>> requests = [request]
          >>> response = client.monolog_about_book(requests)

        Args:
          requests (iterator[:class:`google.cloud.proto.example.library.v1.library_pb2.DiscussBookRequest`]): The input objects.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.Comment` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        return self._monolog_about_book(requests, options)

    def find_related_books(
            self,
            names,
            shelves,
            page_size=None,
            options=None):
        """

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.gax import CallOptions, INITIAL_PAGE
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> names_element = ''
          >>> names = [names_element]
          >>> shelves = []
          >>>
          >>>
          >>> # Iterate over all results
          >>> for element in client.find_related_books(names, shelves):
          >>>     # process element
          >>>     pass
          >>>
          >>> # Or iterate over results one page at a time
          >>> for page in client.find_related_books(names, shelves, options=CallOptions(page_token=INITIAL_PAGE)):
          >>>     for element in page:
          >>>         # process element
          >>>         pass

        Args:
          names (list[str])
          shelves (list[str])
          page_size (int): The maximum number of resources contained in the
            underlying API response. If page streaming is performed per-
            resource, this parameter does not affect the return value. If page
            streaming is performed per-page, this determines the maximum number
            of resources in a page.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax.PageIterator` instance. By default, this
          is an iterable of str instances.
          This object can also be configured to iterate over the pages
          of the response through the `CallOptions` parameter.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.FindRelatedBooksRequest(
            names=names,
            shelves=shelves,
            page_size=page_size)
        return self._find_related_books(request, options)

    def add_tag(
            self,
            resource,
            tag,
            options=None):
        """
        Adds a tag to the book. This RPC is a mixin.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> tag = ''
          >>>
          >>> response = client.add_tag(resource, tag)

        Args:
          resource (str): REQUIRED: The resource which the tag is being added to.
            Resource is usually specified as a path, such as,
            projects/{project}/zones/{zone}/disks/{disk}.
          tag (str): REQUIRED: The tag to add.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.tagger.v1.tagger_pb2.AddTagResponse` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = tagger_pb2.AddTagRequest(
            resource=resource,
            tag=tag)
        return self._add_tag(request, options)

    def add_label(
            self,
            resource,
            label,
            options=None):
        """
        Adds a label to the entity.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>> label = ''
          >>>
          >>> response = client.add_label(resource, label)

        Args:
          resource (str): REQUIRED: The resource which the label is being added to.
            Resource is usually specified as a path, such as,
            projects/{project}/zones/{zone}/disks/{disk}.
          label (str): REQUIRED: The label to add.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.tagger.v1.tagger_pb2.AddLabelResponse` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = tagger_pb2.AddLabelRequest(
            resource=resource,
            label=label)
        return self._add_label(request, options)

    def get_big_book(
            self,
            name,
            options=None):
        """
        Test long-running operations

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> response = client.get_big_book(name)
          >>>
          >>> def callback(operation_future):
          >>>     # Handle result.
          >>>     result = operation_future.result()
          >>>
          >>> response.add_done_callback(callback)
          >>>
          >>> # Handle metadata.
          >>> metadata = response.metadata()

        Args:
          name (str): The name of the book to retrieve.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax._OperationFuture` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookRequest(
            name=name)
        return google.gax._OperationFuture(
            self._get_big_book(request, options),
            self.operations_client,
            library_pb2.Book,
            library_pb2.GetBigBookMetadata,
            options)

    def get_big_nothing(
            self,
            name,
            options=None):
        """
        Test long-running operations with empty return type.

        Example:
          >>> from google.cloud.example import library_v1
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
          >>>
          >>> response = client.get_big_nothing(name)
          >>>
          >>> def callback(operation_future):
          >>>     # Handle result.
          >>>     result = operation_future.result()
          >>>
          >>> response.add_done_callback(callback)
          >>>
          >>> # Handle metadata.
          >>> metadata = response.metadata()

        Args:
          name (str): The name of the book to retrieve.
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.gax._OperationFuture` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.GetBookRequest(
            name=name)
        return google.gax._OperationFuture(
            self._get_big_nothing(request, options),
            self.operations_client,
            empty_pb2.Empty,
            library_pb2.GetBigBookMetadata,
            options)

    def test_optional_required_flattening_params(
            self,
            required_singular_int32,
            required_singular_int64,
            required_singular_float,
            required_singular_double,
            required_singular_bool,
            required_singular_enum,
            required_singular_string,
            required_singular_bytes,
            required_singular_message,
            required_singular_resource_name,
            required_singular_resource_name_oneof,
            required_singular_fixed32,
            required_singular_fixed64,
            required_repeated_int32,
            required_repeated_int64,
            required_repeated_float,
            required_repeated_double,
            required_repeated_bool,
            required_repeated_enum,
            required_repeated_string,
            required_repeated_bytes,
            required_repeated_message,
            required_repeated_resource_name,
            required_repeated_resource_name_oneof,
            required_repeated_fixed32,
            required_repeated_fixed64,
            required_map,
            optional_singular_int32=None,
            optional_singular_int64=None,
            optional_singular_float=None,
            optional_singular_double=None,
            optional_singular_bool=None,
            optional_singular_enum=None,
            optional_singular_string=None,
            optional_singular_bytes=None,
            optional_singular_message=None,
            optional_singular_resource_name=None,
            optional_singular_resource_name_oneof=None,
            optional_singular_fixed32=None,
            optional_singular_fixed64=None,
            optional_repeated_int32=None,
            optional_repeated_int64=None,
            optional_repeated_float=None,
            optional_repeated_double=None,
            optional_repeated_bool=None,
            optional_repeated_enum=None,
            optional_repeated_string=None,
            optional_repeated_bytes=None,
            optional_repeated_message=None,
            optional_repeated_resource_name=None,
            optional_repeated_resource_name_oneof=None,
            optional_repeated_fixed32=None,
            optional_repeated_fixed64=None,
            optional_map=None,
            options=None):
        """
        Test optional flattening parameters of all types

        Example:
          >>> from google.cloud.example import library_v1
          >>> from google.cloud.example.library_v1 import enums
          >>>
          >>> client = library_v1.LibraryServiceClient()
          >>>
          >>> required_singular_int32 = 0
          >>> required_singular_int64 = 0
          >>> required_singular_float = 0.0
          >>> required_singular_double = 0.0
          >>> required_singular_bool = False
          >>> required_singular_enum = enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum.ZERO
          >>> required_singular_string = ''
          >>> required_singular_bytes = b''
          >>> required_singular_message = {}
          >>> required_singular_resource_name = ''
          >>> required_singular_resource_name_oneof = ''
          >>> required_singular_fixed32 = 0
          >>> required_singular_fixed64 = 0
          >>> required_repeated_int32 = []
          >>> required_repeated_int64 = []
          >>> required_repeated_float = []
          >>> required_repeated_double = []
          >>> required_repeated_bool = []
          >>> required_repeated_enum = []
          >>> required_repeated_string = []
          >>> required_repeated_bytes = []
          >>> required_repeated_message = []
          >>> required_repeated_resource_name = []
          >>> required_repeated_resource_name_oneof = []
          >>> required_repeated_fixed32 = []
          >>> required_repeated_fixed64 = []
          >>> required_map = {}
          >>>
          >>> response = client.test_optional_required_flattening_params(required_singular_int32, required_singular_int64, required_singular_float, required_singular_double, required_singular_bool, required_singular_enum, required_singular_string, required_singular_bytes, required_singular_message, required_singular_resource_name, required_singular_resource_name_oneof, required_singular_fixed32, required_singular_fixed64, required_repeated_int32, required_repeated_int64, required_repeated_float, required_repeated_double, required_repeated_bool, required_repeated_enum, required_repeated_string, required_repeated_bytes, required_repeated_message, required_repeated_resource_name, required_repeated_resource_name_oneof, required_repeated_fixed32, required_repeated_fixed64, required_map)

        Args:
          required_singular_int32 (int)
          required_singular_int64 (long)
          required_singular_float (float)
          required_singular_double (float)
          required_singular_bool (bool)
          required_singular_enum (~.enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum)
          required_singular_string (str)
          required_singular_bytes (bytes)
          required_singular_message (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`
          required_singular_resource_name (str)
          required_singular_resource_name_oneof (str)
          required_singular_fixed32 (int)
          required_singular_fixed64 (long)
          required_repeated_int32 (list[int])
          required_repeated_int64 (list[long])
          required_repeated_float (list[float])
          required_repeated_double (list[float])
          required_repeated_bool (list[bool])
          required_repeated_enum (list[~.enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum])
          required_repeated_string (list[str])
          required_repeated_bytes (list[bytes])
          required_repeated_message (list[Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`]]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`
          required_repeated_resource_name (list[str])
          required_repeated_resource_name_oneof (list[str])
          required_repeated_fixed32 (list[int])
          required_repeated_fixed64 (list[long])
          required_map (dict[int -> str])
          optional_singular_int32 (int)
          optional_singular_int64 (long)
          optional_singular_float (float)
          optional_singular_double (float)
          optional_singular_bool (bool)
          optional_singular_enum (~.enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum)
          optional_singular_string (str)
          optional_singular_bytes (bytes)
          optional_singular_message (Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`
          optional_singular_resource_name (str)
          optional_singular_resource_name_oneof (str)
          optional_singular_fixed32 (int)
          optional_singular_fixed64 (long)
          optional_repeated_int32 (list[int])
          optional_repeated_int64 (list[long])
          optional_repeated_float (list[float])
          optional_repeated_double (list[float])
          optional_repeated_bool (list[bool])
          optional_repeated_enum (list[~.enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum])
          optional_repeated_string (list[str])
          optional_repeated_bytes (list[bytes])
          optional_repeated_message (list[Union[dict|:class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`]]): If a dict is provided, it must be of the same form as the protobuf
            message :class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsRequest.InnerMessage`
          optional_repeated_resource_name (list[str])
          optional_repeated_resource_name_oneof (list[str])
          optional_repeated_fixed32 (list[int])
          optional_repeated_fixed64 (list[long])
          optional_map (dict[int -> str])
          options (:class:`google.gax.CallOptions`): Overrides the default
            settings for this call, e.g, timeout, retries etc.

        Returns:
          A :class:`google.cloud.proto.example.library.v1.library_pb2.TestOptionalRequiredFlatteningParamsResponse` instance.

        Raises:
          :exc:`google.gax.errors.GaxError` if the RPC is aborted.
          :exc:`ValueError` if the parameters are invalid.
        """
        request = library_pb2.TestOptionalRequiredFlatteningParamsRequest(
            required_singular_int32=required_singular_int32,
            required_singular_int64=required_singular_int64,
            required_singular_float=required_singular_float,
            required_singular_double=required_singular_double,
            required_singular_bool=required_singular_bool,
            required_singular_enum=required_singular_enum,
            required_singular_string=required_singular_string,
            required_singular_bytes=required_singular_bytes,
            required_singular_message=required_singular_message,
            required_singular_resource_name=required_singular_resource_name,
            required_singular_resource_name_oneof=required_singular_resource_name_oneof,
            required_singular_fixed32=required_singular_fixed32,
            required_singular_fixed64=required_singular_fixed64,
            required_repeated_int32=required_repeated_int32,
            required_repeated_int64=required_repeated_int64,
            required_repeated_float=required_repeated_float,
            required_repeated_double=required_repeated_double,
            required_repeated_bool=required_repeated_bool,
            required_repeated_enum=required_repeated_enum,
            required_repeated_string=required_repeated_string,
            required_repeated_bytes=required_repeated_bytes,
            required_repeated_message=required_repeated_message,
            required_repeated_resource_name=required_repeated_resource_name,
            required_repeated_resource_name_oneof=required_repeated_resource_name_oneof,
            required_repeated_fixed32=required_repeated_fixed32,
            required_repeated_fixed64=required_repeated_fixed64,
            required_map=required_map,
            optional_singular_int32=optional_singular_int32,
            optional_singular_int64=optional_singular_int64,
            optional_singular_float=optional_singular_float,
            optional_singular_double=optional_singular_double,
            optional_singular_bool=optional_singular_bool,
            optional_singular_enum=optional_singular_enum,
            optional_singular_string=optional_singular_string,
            optional_singular_bytes=optional_singular_bytes,
            optional_singular_message=optional_singular_message,
            optional_singular_resource_name=optional_singular_resource_name,
            optional_singular_resource_name_oneof=optional_singular_resource_name_oneof,
            optional_singular_fixed32=optional_singular_fixed32,
            optional_singular_fixed64=optional_singular_fixed64,
            optional_repeated_int32=optional_repeated_int32,
            optional_repeated_int64=optional_repeated_int64,
            optional_repeated_float=optional_repeated_float,
            optional_repeated_double=optional_repeated_double,
            optional_repeated_bool=optional_repeated_bool,
            optional_repeated_enum=optional_repeated_enum,
            optional_repeated_string=optional_repeated_string,
            optional_repeated_bytes=optional_repeated_bytes,
            optional_repeated_message=optional_repeated_message,
            optional_repeated_resource_name=optional_repeated_resource_name,
            optional_repeated_resource_name_oneof=optional_repeated_resource_name_oneof,
            optional_repeated_fixed32=optional_repeated_fixed32,
            optional_repeated_fixed64=optional_repeated_fixed64,
            optional_map=optional_map)
        return self._test_optional_required_flattening_params(request, options)

============== file: google/cloud/example/library_v1/gapic/library_service_client_config.py ==============
config = {
  "interfaces": {
    "google.example.library.v1.LibraryService": {
      "retry_codes": {
        "idempotent": [
          "DEADLINE_EXCEEDED",
          "UNAVAILABLE"
        ],
        "non_idempotent": []
      },
      "retry_params": {
        "default": {
          "initial_retry_delay_millis": 100,
          "retry_delay_multiplier": 1.2,
          "max_retry_delay_millis": 1000,
          "initial_rpc_timeout_millis": 300,
          "rpc_timeout_multiplier": 1.3,
          "max_rpc_timeout_millis": 3000,
          "total_timeout_millis": 30000
        }
      },
      "methods": {
        "CreateShelf": {
          "timeout_millis": 1000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "GetShelf": {
          "timeout_millis": 2000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "ListShelves": {
          "timeout_millis": 3000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "DeleteShelf": {
          "timeout_millis": 4000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "MergeShelves": {
          "timeout_millis": 5000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "CreateBook": {
          "timeout_millis": 6000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "PublishSeries": {
          "timeout_millis": 7000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default",
          "bundling": {
            "element_count_threshold": 6,
            "element_count_limit": 7,
            "request_byte_threshold": 100000,
            "request_byte_limit": 150000,
            "delay_threshold_millis": 500
          }
        },
        "GetBook": {
          "timeout_millis": 8000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "ListBooks": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "DeleteBook": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "UpdateBook": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "MoveBook": {
          "timeout_millis": 10000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "ListStrings": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "AddComments": {
          "timeout_millis": 10000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default",
          "bundling": {
            "element_count_threshold": 6,
            "request_byte_threshold": 100000,
            "delay_threshold_millis": 500
          }
        },
        "GetBookFromArchive": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "GetBookFromAnywhere": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "GetBookFromAbsolutelyAnywhere": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "UpdateBookIndex": {
          "timeout_millis": 10000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "StreamShelves": {
          "timeout_millis": 30000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "StreamBooks": {
          "timeout_millis": 30000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "DiscussBook": {
          "timeout_millis": 30000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "MonologAboutBook": {
          "timeout_millis": 30000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "FindRelatedBooks": {
          "timeout_millis": 3000,
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "AddTag": {
          "timeout_millis": 60000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "AddLabel": {
          "timeout_millis": 60000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "GetBigBook": {
          "timeout_millis": 60000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "GetBigNothing": {
          "timeout_millis": 60000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "TestOptionalRequiredFlatteningParams": {
          "timeout_millis": 60000,
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        }
      }
    }
  }
}

============== file: google/cloud/example/library_v1/types.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


from __future__ import absolute_import
import sys

from google.gax.utils.messages import get_messages

from google.api import http_pb2
from google.cloud.proto.example.library.v1 import book_from_anywhere_pb2
from google.cloud.proto.example.library.v1 import field_mask_pb2 as v1_field_mask_pb2
from google.cloud.proto.example.library.v1 import library_pb2
from google.cloud.proto.tagger.v1 import tagger_pb2
from google.cloud.proto.test.shared.data import other_shared_type_pb2
from google.cloud.proto.test.shared.data import shared_type_pb2
from google.longrunning import operations_pb2
from google.protobuf import any_pb2
from google.protobuf import descriptor_pb2
from google.protobuf import duration_pb2
from google.protobuf import empty_pb2
from google.protobuf import field_mask_pb2 as protobuf_field_mask_pb2
from google.protobuf import struct_pb2
from google.protobuf import timestamp_pb2
from google.protobuf import wrappers_pb2
from google.rpc import status_pb2


names = []
for module in (http_pb2,
               book_from_anywhere_pb2,
               v1_field_mask_pb2,
               library_pb2,
               tagger_pb2,
               other_shared_type_pb2,
               shared_type_pb2,
               operations_pb2,
               any_pb2,
               descriptor_pb2,
               duration_pb2,
               empty_pb2,
               protobuf_field_mask_pb2,
               struct_pb2,
               timestamp_pb2,
               wrappers_pb2,
               status_pb2,):
    for name, message in get_messages(module).items():
        message.__module__ = 'google.cloud.example.library_v1.types'
        setattr(sys.modules[__name__], name, message)
        names.append(name)


__all__ = tuple(sorted(names))
============== file: nox.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


from __future__ import absolute_import
import os

import nox


@nox.session
@nox.parametrize('python_version', ['2.7', '3.4', '3.5', '3.6'])
def unit_tests(session, python_version):
    """Run the unit test suite."""

    session.interpreter = 'python{}'.format(python_version)

    session.virtualenv_dirname = 'unit-' + python_version

    session.install('mock', 'pytest')
    session.install('-e', '.')

    session.run('py.test', '--quiet', os.path.join('tests', 'unit'))


@nox.session
@nox.parametrize('python_version', ['2.7', '3.6'])
def system_tests(session, python_version):
    """Run the system test suite."""

    if not os.environ.get('GOOGLE_APPLICATION_CREDENTIALS', ''):
        session.skip('Credentials must be set via environment variable.')

    session.interpreter = 'python{}'.format(python_version)

    session.virtualenv_dirname = 'sys-' + python_version

    session.install('pytest')
    session.install('-e', '.')

    session.run(
        'py.test',
        '--quiet',
        os.path.join('tests', 'system'),
        *session.posargs)


@nox.session
def lint_setup_py(session):
    """Verify that setup.py is valid (including RST check)."""
    session.interpreter = 'python3.6'
    session.install('docutils', 'pygments')
    session.run(
        'python', 'setup.py', 'check', '--restructuredtext', '--strict')
============== file: setup.py ==============
"""A setup module for the GAPIC Google Example Library API library.

See:
https://packaging.python.org/en/latest/distributing.html
https://github.com/pypa/sampleproject
"""

from setuptools import setup, find_packages
import sys

install_requires = [
    'google-auth>=1.0.2, <2.0dev',
    'google-gax>=0.15.0, <0.16.0',
    'googleapis-common-protos[grpc]>=1.5.0, <2.0dev',
    'python-other-package>=12.1.0, <13.5.1',
    'requests>=2.18.4, <3.0dev',
]

setup(
    name='google-cloud-library',
    version='0.15.0',
    author='Google, Inc.',
    author_email='googleapis-packages@google.com',
    classifiers=[
        'Intended Audience :: Developers',
        'Development Status :: 3 - Alpha',
        'Intended Audience :: Developers',
        'License :: OSI Approved :: Apache Software License',
        'Programming Language :: Python',
        'Programming Language :: Python :: 2',
        'Programming Language :: Python :: 2.7',
        'Programming Language :: Python :: 3',
        'Programming Language :: Python :: 3.4',
        'Programming Language :: Python :: 3.5',
        'Programming Language :: Python :: 3.6',
        'Programming Language :: Python :: Implementation :: CPython',
    ],
    description='GAPIC library for the Google Example Library API',
    include_package_data=True,
    long_description=open('README.rst').read(),
    install_requires=install_requires,
    license='Apache-2.0',
    packages=find_packages(),
    namespace_packages=['google', 'google.cloud', 'google.cloud.example', 'google.cloud.proto', 'google.cloud.proto.library'],
    url='https://github.com/googleapis/googleapis'
)

============== file: tests/system/gapic/v1/test_system_library_service_v1.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

import os
import time
import unittest

from google.cloud.example import library_v1
from google.cloud.example.library_v1 import enums
from google.cloud.proto.example.library.v1 import field_mask_pb2 as v1_field_mask_pb2
from google.cloud.proto.example.library.v1 import library_pb2
from google.protobuf import field_mask_pb2 as protobuf_field_mask_pb2


class TestSystemLibraryService(unittest.TestCase):

    def test_update_book(self):
        project_id = os.environ['PROJECT_ID']

        client = library_v1.LibraryServiceClient()
        name = client.book_path("testShelf-{0}".format(time.time()), project_id)
        rating = enums.Book.Rating.GOOD
        book = {'rating': rating}
        response = client.update_book(name, book)
============== file: tests/unit/gapic/v1/test_library_service_client_v1.py ==============
# Copyright 2017, Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

"""Unit tests."""

import mock
import unittest

from google.gax import errors
from google.rpc import status_pb2

from google.cloud.example import library_v1
from google.cloud.example.library_v1 import enums
from google.cloud.proto.example.library.v1 import book_from_anywhere_pb2
from google.cloud.proto.example.library.v1 import library_pb2
from google.cloud.proto.tagger.v1 import tagger_pb2
from google.longrunning import operations_pb2
from google.protobuf import empty_pb2


class CustomException(Exception):
    pass


class TestLibraryServiceClient(unittest.TestCase):

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_create_shelf(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        shelf = {}

        # Mock response
        name = 'name3373707'
        theme = 'theme110327241'
        internal_theme = 'internalTheme792518087'
        expected_response = {'name': name, 'theme': theme, 'internal_theme': internal_theme}
        expected_response = library_pb2.Shelf(**expected_response)
        grpc_stub.CreateShelf.return_value = expected_response

        response = client.create_shelf(shelf)
        self.assertEqual(expected_response, response)

        grpc_stub.CreateShelf.assert_called_once()
        args, kwargs = grpc_stub.CreateShelf.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.CreateShelfRequest(shelf=shelf)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_create_shelf_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        shelf = {}

        # Mock exception response
        grpc_stub.CreateShelf.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.create_shelf, shelf)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_shelf(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        options_ = 'options-1249474914'

        # Mock response
        name_2 = 'name2-1052831874'
        theme = 'theme110327241'
        internal_theme = 'internalTheme792518087'
        expected_response = {'name': name_2, 'theme': theme, 'internal_theme': internal_theme}
        expected_response = library_pb2.Shelf(**expected_response)
        grpc_stub.GetShelf.return_value = expected_response

        response = client.get_shelf(name, options_)
        self.assertEqual(expected_response, response)

        grpc_stub.GetShelf.assert_called_once()
        args, kwargs = grpc_stub.GetShelf.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetShelfRequest(name=name, options=options_)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_shelf_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        options_ = 'options-1249474914'

        # Mock exception response
        grpc_stub.GetShelf.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.get_shelf, name, options_)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_shelves(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock response
        next_page_token = ''
        shelves_element = {}
        shelves = [shelves_element]
        expected_response = {'next_page_token': next_page_token, 'shelves': shelves}
        expected_response = library_pb2.ListShelvesResponse(**expected_response)
        grpc_stub.ListShelves.return_value = expected_response

        paged_list_response = client.list_shelves()
        resources = list(paged_list_response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response.shelves[0], resources[0])

        grpc_stub.ListShelves.assert_called_once()
        args, kwargs = grpc_stub.ListShelves.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.ListShelvesRequest()
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_shelves_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock exception response
        grpc_stub.ListShelves.side_effect = CustomException()

        paged_list_response = client.list_shelves()
        self.assertRaises(errors.GaxError, list, paged_list_response)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_delete_shelf(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')

        client.delete_shelf(name)

        grpc_stub.DeleteShelf.assert_called_once()
        args, kwargs = grpc_stub.DeleteShelf.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.DeleteShelfRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_delete_shelf_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')

        # Mock exception response
        grpc_stub.DeleteShelf.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.delete_shelf, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_merge_shelves(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        other_shelf_name = client.shelf_path('[SHELF_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        theme = 'theme110327241'
        internal_theme = 'internalTheme792518087'
        expected_response = {'name': name_2, 'theme': theme, 'internal_theme': internal_theme}
        expected_response = library_pb2.Shelf(**expected_response)
        grpc_stub.MergeShelves.return_value = expected_response

        response = client.merge_shelves(name, other_shelf_name)
        self.assertEqual(expected_response, response)

        grpc_stub.MergeShelves.assert_called_once()
        args, kwargs = grpc_stub.MergeShelves.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.MergeShelvesRequest(name=name, other_shelf_name=other_shelf_name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_merge_shelves_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        other_shelf_name = client.shelf_path('[SHELF_ID]')

        # Mock exception response
        grpc_stub.MergeShelves.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.merge_shelves, name, other_shelf_name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_create_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        book = {}

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        grpc_stub.CreateBook.return_value = expected_response

        response = client.create_book(name, book)
        self.assertEqual(expected_response, response)

        grpc_stub.CreateBook.assert_called_once()
        args, kwargs = grpc_stub.CreateBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.CreateBookRequest(name=name, book=book)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_create_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')
        book = {}

        # Mock exception response
        grpc_stub.CreateBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.create_book, name, book)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_publish_series(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        shelf = {}
        books = []
        series_string = 'foobar'
        series_uuid = {'series_string': series_string}

        # Mock response
        book_names_element = 'bookNamesElement1491670575'
        book_names = [book_names_element]
        expected_response = {'book_names': book_names}
        expected_response = library_pb2.PublishSeriesResponse(**expected_response)
        grpc_stub.PublishSeries.return_value = expected_response

        response = client.publish_series(shelf, books, series_uuid)
        self.assertEqual(expected_response, response)

        grpc_stub.PublishSeries.assert_called_once()
        args, kwargs = grpc_stub.PublishSeries.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.PublishSeriesRequest(shelf=shelf, books=books, series_uuid=series_uuid)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_publish_series_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        shelf = {}
        books = []
        series_string = 'foobar'
        series_uuid = {'series_string': series_string}

        # Mock exception response
        grpc_stub.PublishSeries.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.publish_series, shelf, books, series_uuid)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        grpc_stub.GetBook.return_value = expected_response

        response = client.get_book(name)
        self.assertEqual(expected_response, response)

        grpc_stub.GetBook.assert_called_once()
        args, kwargs = grpc_stub.GetBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        grpc_stub.GetBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.get_book, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_books(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')

        # Mock response
        next_page_token = ''
        books_element = {}
        books = [books_element]
        expected_response = {'next_page_token': next_page_token, 'books': books}
        expected_response = library_pb2.ListBooksResponse(**expected_response)
        grpc_stub.ListBooks.return_value = expected_response

        paged_list_response = client.list_books(name)
        resources = list(paged_list_response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response.books[0], resources[0])

        grpc_stub.ListBooks.assert_called_once()
        args, kwargs = grpc_stub.ListBooks.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.ListBooksRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_books_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.shelf_path('[SHELF_ID]')

        # Mock exception response
        grpc_stub.ListBooks.side_effect = CustomException()

        paged_list_response = client.list_books(name)
        self.assertRaises(errors.GaxError, list, paged_list_response)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_delete_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        client.delete_book(name)

        grpc_stub.DeleteBook.assert_called_once()
        args, kwargs = grpc_stub.DeleteBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.DeleteBookRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_delete_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        grpc_stub.DeleteBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.delete_book, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_update_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        book = {}

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        grpc_stub.UpdateBook.return_value = expected_response

        response = client.update_book(name, book)
        self.assertEqual(expected_response, response)

        grpc_stub.UpdateBook.assert_called_once()
        args, kwargs = grpc_stub.UpdateBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.UpdateBookRequest(name=name, book=book)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_update_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        book = {}

        # Mock exception response
        grpc_stub.UpdateBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.update_book, name, book)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_move_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        other_shelf_name = client.shelf_path('[SHELF_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        grpc_stub.MoveBook.return_value = expected_response

        response = client.move_book(name, other_shelf_name)
        self.assertEqual(expected_response, response)

        grpc_stub.MoveBook.assert_called_once()
        args, kwargs = grpc_stub.MoveBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.MoveBookRequest(name=name, other_shelf_name=other_shelf_name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_move_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        other_shelf_name = client.shelf_path('[SHELF_ID]')

        # Mock exception response
        grpc_stub.MoveBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.move_book, name, other_shelf_name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_strings(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock response
        next_page_token = ''
        strings_element = 'stringsElement474465855'
        strings = [strings_element]
        expected_response = {'next_page_token': next_page_token, 'strings': strings}
        expected_response = library_pb2.ListStringsResponse(**expected_response)
        grpc_stub.ListStrings.return_value = expected_response

        paged_list_response = client.list_strings()
        resources = list(paged_list_response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response.strings[0], resources[0])

        grpc_stub.ListStrings.assert_called_once()
        args, kwargs = grpc_stub.ListStrings.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.ListStringsRequest()
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_list_strings_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock exception response
        grpc_stub.ListStrings.side_effect = CustomException()

        paged_list_response = client.list_strings()
        self.assertRaises(errors.GaxError, list, paged_list_response)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_comments(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        comment = b'95'
        stage = enums.Comment.Stage.UNSET
        alignment = enums.SomeMessage2.SomeMessage3.Alignment.CHAR
        comments_element = {'comment': comment, 'stage': stage, 'alignment': alignment}
        comments = [comments_element]

        client.add_comments(name, comments)

        grpc_stub.AddComments.assert_called_once()
        args, kwargs = grpc_stub.AddComments.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.AddCommentsRequest(name=name, comments=comments)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_comments_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        comment = b'95'
        stage = enums.Comment.Stage.UNSET
        alignment = enums.SomeMessage2.SomeMessage3.Alignment.CHAR
        comments_element = {'comment': comment, 'stage': stage, 'alignment': alignment}
        comments = [comments_element]

        # Mock exception response
        grpc_stub.AddComments.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.add_comments, name, comments)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_archive(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.archived_book_path('[ARCHIVE_PATH]', '[BOOK_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.BookFromArchive(**expected_response)
        grpc_stub.GetBookFromArchive.return_value = expected_response

        response = client.get_book_from_archive(name)
        self.assertEqual(expected_response, response)

        grpc_stub.GetBookFromArchive.assert_called_once()
        args, kwargs = grpc_stub.GetBookFromArchive.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookFromArchiveRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_archive_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.archived_book_path('[ARCHIVE_PATH]', '[BOOK_ID]')

        # Mock exception response
        grpc_stub.GetBookFromArchive.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.get_book_from_archive, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_anywhere(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        alt_book_name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = book_from_anywhere_pb2.BookFromAnywhere(**expected_response)
        grpc_stub.GetBookFromAnywhere.return_value = expected_response

        response = client.get_book_from_anywhere(name, alt_book_name)
        self.assertEqual(expected_response, response)

        grpc_stub.GetBookFromAnywhere.assert_called_once()
        args, kwargs = grpc_stub.GetBookFromAnywhere.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookFromAnywhereRequest(name=name, alt_book_name=alt_book_name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_anywhere_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        alt_book_name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        grpc_stub.GetBookFromAnywhere.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.get_book_from_anywhere, name, alt_book_name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_absolutely_anywhere(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = book_from_anywhere_pb2.BookFromAnywhere(**expected_response)
        grpc_stub.GetBookFromAbsolutelyAnywhere.return_value = expected_response

        response = client.get_book_from_absolutely_anywhere(name)
        self.assertEqual(expected_response, response)

        grpc_stub.GetBookFromAbsolutelyAnywhere.assert_called_once()
        args, kwargs = grpc_stub.GetBookFromAbsolutelyAnywhere.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookFromAbsolutelyAnywhereRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_book_from_absolutely_anywhere_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        grpc_stub.GetBookFromAbsolutelyAnywhere.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.get_book_from_absolutely_anywhere, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_update_book_index(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        index_name = 'default index'
        index_map_item = 'indexMapItem1918721251'
        index_map = {'default_key': index_map_item}

        client.update_book_index(name, index_name, index_map)

        grpc_stub.UpdateBookIndex.assert_called_once()
        args, kwargs = grpc_stub.UpdateBookIndex.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.UpdateBookIndexRequest(name=name, index_name=index_name, index_map=index_map)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_update_book_index_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        index_name = 'default index'
        index_map_item = 'indexMapItem1918721251'
        index_map = {'default_key': index_map_item}

        # Mock exception response
        grpc_stub.UpdateBookIndex.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.update_book_index, name, index_name, index_map)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_stream_shelves(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock response
        shelves_element = {}
        shelves = [shelves_element]
        expected_response = {'shelves': shelves}
        expected_response = library_pb2.StreamShelvesResponse(**expected_response)
        grpc_stub.StreamShelves.return_value = iter([expected_response])

        response = client.stream_shelves()
        resources = list(response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response, resources[0])

        grpc_stub.StreamShelves.assert_called_once()
        args, kwargs = grpc_stub.StreamShelves.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.StreamShelvesRequest()
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_stream_shelves_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock exception response
        grpc_stub.StreamShelves.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.stream_shelves)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_stream_books(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        grpc_stub.StreamBooks.return_value = iter([expected_response])

        response = client.stream_books(name)
        resources = list(response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response, resources[0])

        grpc_stub.StreamBooks.assert_called_once()
        args, kwargs = grpc_stub.StreamBooks.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.StreamBooksRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_stream_books_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'

        # Mock exception response
        grpc_stub.StreamBooks.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.stream_books, name)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_discuss_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'
        request = {'name': name}
        requests = [request]

        # Mock response
        user_name = 'userName339340927'
        comment = b'95'
        expected_response = {'user_name': user_name, 'comment': comment}
        expected_response = library_pb2.Comment(**expected_response)
        grpc_stub.DiscussBook.return_value = iter([expected_response])

        response = client.discuss_book(requests)
        resources = list(response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response, resources[0])

        grpc_stub.DiscussBook.assert_called_once()
        args, kwargs = grpc_stub.DiscussBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_requests = args[0]
        self.assertEqual(1, len(actual_requests))
        actual_request = list(actual_requests)[0]
        self.assertEqual(request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_discuss_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'
        request = {'name': name}
        requests = [request]

        # Mock exception response
        grpc_stub.DiscussBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.discuss_book, requests)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_monolog_about_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'
        request = {'name': name}
        requests = [request]

        # Mock response
        user_name = 'userName339340927'
        comment = b'95'
        expected_response = {'user_name': user_name, 'comment': comment}
        expected_response = library_pb2.Comment(**expected_response)
        grpc_stub.MonologAboutBook.return_value = expected_response

        response = client.monolog_about_book(requests)
        self.assertEqual(expected_response, response)

        grpc_stub.MonologAboutBook.assert_called_once()
        args, kwargs = grpc_stub.MonologAboutBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_requests = args[0]
        self.assertEqual(1, len(actual_requests))
        actual_request = list(actual_requests)[0]
        self.assertEqual(request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_monolog_about_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = 'name3373707'
        request = {'name': name}
        requests = [request]

        # Mock exception response
        grpc_stub.MonologAboutBook.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.monolog_about_book, requests)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_find_related_books(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        names_element = 'namesElement-249113339'
        names = [names_element]
        shelves = []

        # Mock response
        next_page_token = ''
        names_element_2 = 'namesElement21120252792'
        names_2 = [names_element_2]
        expected_response = {'next_page_token': next_page_token, 'names': names_2}
        expected_response = library_pb2.FindRelatedBooksResponse(**expected_response)
        grpc_stub.FindRelatedBooks.return_value = expected_response

        paged_list_response = client.find_related_books(names, shelves)
        resources = list(paged_list_response)
        self.assertEqual(1, len(resources))
        self.assertEqual(expected_response.names[0], resources[0])

        grpc_stub.FindRelatedBooks.assert_called_once()
        args, kwargs = grpc_stub.FindRelatedBooks.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.FindRelatedBooksRequest(names=names, shelves=shelves)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_find_related_books_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        names_element = 'namesElement-249113339'
        names = [names_element]
        shelves = []

        # Mock exception response
        grpc_stub.FindRelatedBooks.side_effect = CustomException()

        paged_list_response = client.find_related_books(names, shelves)
        self.assertRaises(errors.GaxError, list, paged_list_response)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_tag(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        tag = 'tag114586'

        # Mock response
        expected_response = {}
        expected_response = tagger_pb2.AddTagResponse(**expected_response)
        grpc_stub.AddTag.return_value = expected_response

        response = client.add_tag(resource, tag)
        self.assertEqual(expected_response, response)

        grpc_stub.AddTag.assert_called_once()
        args, kwargs = grpc_stub.AddTag.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = tagger_pb2.AddTagRequest(resource=resource, tag=tag)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_tag_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        tag = 'tag114586'

        # Mock exception response
        grpc_stub.AddTag.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.add_tag, resource, tag)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_label(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        label = 'label102727412'

        # Mock response
        expected_response = {}
        expected_response = tagger_pb2.AddLabelResponse(**expected_response)
        grpc_stub.AddLabel.return_value = expected_response

        response = client.add_label(resource, label)
        self.assertEqual(expected_response, response)

        grpc_stub.AddLabel.assert_called_once()
        args, kwargs = grpc_stub.AddLabel.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = tagger_pb2.AddLabelRequest(resource=resource, label=label)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_add_label_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        resource = client.book_path('[SHELF_ID]', '[BOOK_ID]')
        label = 'label102727412'

        # Mock exception response
        grpc_stub.AddLabel.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.add_label, resource, label)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_big_book(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock response
        name_2 = 'name2-1052831874'
        author = 'author-1406328437'
        title = 'title110371416'
        read = True
        expected_response = {'name': name_2, 'author': author, 'title': title, 'read': read}
        expected_response = library_pb2.Book(**expected_response)
        operation = operations_pb2.Operation(name='operations/test_get_big_book', done=True)
        operation.response.Pack(expected_response)
        grpc_stub.GetBigBook.return_value = operation

        response = client.get_big_book(name)
        self.assertEqual(expected_response, response.result())

        grpc_stub.GetBigBook.assert_called_once()
        args, kwargs = grpc_stub.GetBigBook.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_big_book_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        error = status_pb2.Status()
        operation = operations_pb2.Operation(name='operations/test_get_big_book_exception', done=True)
        operation.error.CopyFrom(error)
        grpc_stub.GetBigBook.return_value = operation

        response = client.get_big_book(name)
        self.assertEqual(error, response.exception())

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_big_nothing(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock response
        expected_response = {}
        expected_response = empty_pb2.Empty(**expected_response)
        operation = operations_pb2.Operation(name='operations/test_get_big_nothing', done=True)
        operation.response.Pack(expected_response)
        grpc_stub.GetBigNothing.return_value = operation

        response = client.get_big_nothing(name)
        self.assertEqual(expected_response, response.result())

        grpc_stub.GetBigNothing.assert_called_once()
        args, kwargs = grpc_stub.GetBigNothing.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.GetBookRequest(name=name)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_get_big_nothing_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        name = client.book_path('[SHELF_ID]', '[BOOK_ID]')

        # Mock exception response
        error = status_pb2.Status()
        operation = operations_pb2.Operation(name='operations/test_get_big_nothing_exception', done=True)
        operation.error.CopyFrom(error)
        grpc_stub.GetBigNothing.return_value = operation

        response = client.get_big_nothing(name)
        self.assertEqual(error, response.exception())

    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_test_optional_required_flattening_params(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        required_singular_int32 = -72313594
        required_singular_int64 = -72313499
        required_singular_float = -7514705.0
        required_singular_double = 1.9111005E8
        required_singular_bool = True
        required_singular_enum = enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum.ZERO
        required_singular_string = 'requiredSingularString-1949894503'
        required_singular_bytes = b'-29'
        required_singular_message = {}
        required_singular_resource_name = 'requiredSingularResourceName-1701575020'
        required_singular_resource_name_oneof = 'requiredSingularResourceNameOneof-25303726'
        required_singular_fixed32 = 720656715
        required_singular_fixed64 = 720656810
        required_repeated_int32 = []
        required_repeated_int64 = []
        required_repeated_float = []
        required_repeated_double = []
        required_repeated_bool = []
        required_repeated_enum = []
        required_repeated_string = []
        required_repeated_bytes = []
        required_repeated_message = []
        required_repeated_resource_name = []
        required_repeated_resource_name_oneof = []
        required_repeated_fixed32 = []
        required_repeated_fixed64 = []
        required_map = {}

        # Mock response
        expected_response = {}
        expected_response = library_pb2.TestOptionalRequiredFlatteningParamsResponse(**expected_response)
        grpc_stub.TestOptionalRequiredFlatteningParams.return_value = expected_response

        response = client.test_optional_required_flattening_params(required_singular_int32, required_singular_int64, required_singular_float, required_singular_double, required_singular_bool, required_singular_enum, required_singular_string, required_singular_bytes, required_singular_message, required_singular_resource_name, required_singular_resource_name_oneof, required_singular_fixed32, required_singular_fixed64, required_repeated_int32, required_repeated_int64, required_repeated_float, required_repeated_double, required_repeated_bool, required_repeated_enum, required_repeated_string, required_repeated_bytes, required_repeated_message, required_repeated_resource_name, required_repeated_resource_name_oneof, required_repeated_fixed32, required_repeated_fixed64, required_map)
        self.assertEqual(expected_response, response)

        grpc_stub.TestOptionalRequiredFlatteningParams.assert_called_once()
        args, kwargs = grpc_stub.TestOptionalRequiredFlatteningParams.call_args
        self.assertEqual(len(args), 2)
        self.assertEqual(len(kwargs), 1)
        self.assertIn('metadata', kwargs)
        actual_request = args[0]

        expected_request = library_pb2.TestOptionalRequiredFlatteningParamsRequest(required_singular_int32=required_singular_int32, required_singular_int64=required_singular_int64, required_singular_float=required_singular_float, required_singular_double=required_singular_double, required_singular_bool=required_singular_bool, required_singular_enum=required_singular_enum, required_singular_string=required_singular_string, required_singular_bytes=required_singular_bytes, required_singular_message=required_singular_message, required_singular_resource_name=required_singular_resource_name, required_singular_resource_name_oneof=required_singular_resource_name_oneof, required_singular_fixed32=required_singular_fixed32, required_singular_fixed64=required_singular_fixed64, required_repeated_int32=required_repeated_int32, required_repeated_int64=required_repeated_int64, required_repeated_float=required_repeated_float, required_repeated_double=required_repeated_double, required_repeated_bool=required_repeated_bool, required_repeated_enum=required_repeated_enum, required_repeated_string=required_repeated_string, required_repeated_bytes=required_repeated_bytes, required_repeated_message=required_repeated_message, required_repeated_resource_name=required_repeated_resource_name, required_repeated_resource_name_oneof=required_repeated_resource_name_oneof, required_repeated_fixed32=required_repeated_fixed32, required_repeated_fixed64=required_repeated_fixed64, required_map=required_map)
        self.assertEqual(expected_request, actual_request)

    @mock.patch('google.gax.config.API_ERRORS', (CustomException,))
    @mock.patch('google.gax.config.create_stub', spec=True)
    def test_test_optional_required_flattening_params_exception(self, mock_create_stub):
        # Mock gRPC layer
        grpc_stub = mock.Mock()
        mock_create_stub.return_value = grpc_stub

        client = library_v1.LibraryServiceClient()

        # Mock request
        required_singular_int32 = -72313594
        required_singular_int64 = -72313499
        required_singular_float = -7514705.0
        required_singular_double = 1.9111005E8
        required_singular_bool = True
        required_singular_enum = enums.TestOptionalRequiredFlatteningParamsRequest.InnerEnum.ZERO
        required_singular_string = 'requiredSingularString-1949894503'
        required_singular_bytes = b'-29'
        required_singular_message = {}
        required_singular_resource_name = 'requiredSingularResourceName-1701575020'
        required_singular_resource_name_oneof = 'requiredSingularResourceNameOneof-25303726'
        required_singular_fixed32 = 720656715
        required_singular_fixed64 = 720656810
        required_repeated_int32 = []
        required_repeated_int64 = []
        required_repeated_float = []
        required_repeated_double = []
        required_repeated_bool = []
        required_repeated_enum = []
        required_repeated_string = []
        required_repeated_bytes = []
        required_repeated_message = []
        required_repeated_resource_name = []
        required_repeated_resource_name_oneof = []
        required_repeated_fixed32 = []
        required_repeated_fixed64 = []
        required_map = {}

        # Mock exception response
        grpc_stub.TestOptionalRequiredFlatteningParams.side_effect = CustomException()

        self.assertRaises(errors.GaxError, client.test_optional_required_flattening_params, required_singular_int32, required_singular_int64, required_singular_float, required_singular_double, required_singular_bool, required_singular_enum, required_singular_string, required_singular_bytes, required_singular_message, required_singular_resource_name, required_singular_resource_name_oneof, required_singular_fixed32, required_singular_fixed64, required_repeated_int32, required_repeated_int64, required_repeated_float, required_repeated_double, required_repeated_bool, required_repeated_enum, required_repeated_string, required_repeated_bytes, required_repeated_message, required_repeated_resource_name, required_repeated_resource_name_oneof, required_repeated_fixed32, required_repeated_fixed64, required_map)

