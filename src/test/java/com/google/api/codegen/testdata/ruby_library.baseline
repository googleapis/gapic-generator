============== file: library_service_api.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# EDITING INSTRUCTIONS
# This file was generated from the file
# https://github.com/googleapis/googleapis/blob/master/library.proto,
# and updates to that file get reflected here through a refresh process.
# For the short term, the refresh process will only be runnable by Google
# engineers.
#
# The only allowed edits are to method and file documentation. A 3-way
# merge preserves those additions if the generated source changes.

require 'json'
require 'pathname'

require 'google/gax'
require 'library_services'

module Google
  module Example
    module Library
      module V1
        # This API represents a simple digital library.  It lets you manage Shelf
        # resources and Book resources in the library. It defines the following
        # resource model:
        #
        # - The API has a collection of Shelf
        #   resources, named +shelves/*+
        #
        # - Each Shelf has a collection of Book
        #   resources, named +shelves/*/books/*+
        #
        # Check out {cloud docs!}[https://cloud.google.com/library/example/link].
        # This is {not a cloud link}[http://www.google.com].
        class LibraryServiceApi
          # The default address of the service.
          SERVICE_ADDRESS = 'library-example.googleapis.com'.freeze

          # The default port of the service.
          DEFAULT_SERVICE_PORT = 443

          CODE_GEN_NAME_VERSION = 'gapic/0.1.0'.freeze

          DEFAULT_TIMEOUT = 30

          PAGE_DESCRIPTORS = {
            'list_shelves' => Google::Gax::PageDescriptor.new(
              'page_token',
              'next_page_token',
              'shelves'),
            'list_books' => Google::Gax::PageDescriptor.new(
              'page_token',
              'next_page_token',
              'books'),
            'list_strings' => Google::Gax::PageDescriptor.new(
              'page_token',
              'next_page_token',
              'strings')
          }.freeze

          private_constant :PAGE_DESCRIPTORS

          BUNDLE_DESCRIPTORS = {
            'publish_series' => Google::Gax::BundleDescriptor.new(
              'books',
              [
                'edition',
                'shelf.name'
              ],
              subresponse_field: 'book_names')
          }.freeze

          private_constant :BUNDLE_DESCRIPTORS

          # The scopes needed to make gRPC calls to all of the methods defined in
          # this service.
          ALL_SCOPES = [
            'https://www.googleapis.com/auth/library',
            'https://www.googleapis.com/auth/cloud-platform'
          ].freeze

          SHELF_PATH_TEMPLATE = Google::Gax::PathTemplate.new(
            'shelves/{shelf}')

          private_constant :SHELF_PATH_TEMPLATE

          BOOK_PATH_TEMPLATE = Google::Gax::PathTemplate.new(
            'shelves/{shelf}/books/{book}')

          private_constant :BOOK_PATH_TEMPLATE

          # Returns a fully-qualified shelf resource name string.
          # @param shelf [String]
          # @return [String]
          def self.shelf_path(shelf)
            SHELF_PATH_TEMPLATE.render(
              :'shelf' => shelf)
          end

          # Returns a fully-qualified book resource name string.
          # @param shelf [String]
          # @param book [String]
          # @return [String]
          def self.book_path(shelf, book)
            BOOK_PATH_TEMPLATE.render(
              :'shelf' => shelf,
              :'book' => book)
          end

          # Parses the shelf from a shelf resource.
          # @param shelf_name [String]
          # @return [String]
          def self.match_shelf_from_shelf_name(shelf_name)
            SHELF_PATH_TEMPLATE.match(shelf_name)['shelf']
          end

          # Parses the shelf from a book resource.
          # @param book_name [String]
          # @return [String]
          def self.match_shelf_from_book_name(book_name)
            BOOK_PATH_TEMPLATE.match(book_name)['shelf']
          end

          # Parses the book from a book resource.
          # @param book_name [String]
          # @return [String]
          def self.match_book_from_book_name(book_name)
            BOOK_PATH_TEMPLATE.match(book_name)['book']
          end

          # @param service_path [String]
          #   The domain name of the API remote host.
          # @param port [Integer]
          #   The port on which to connect to the remote host.
          # @param channel [Channel]
          #   A Channel object through which to make calls.
          # @param chan_creds [Grpc::ChannelCredentials]
          #   A ChannelCredentials for the setting up the RPC client.
          # @param client_config[Hash]
          #   A Hash for call options for each method. See
          #   Google::Gax#construct_settings for the structure of
          #   this data. Falls back to the default config if not specified
          #   or the specified config is missing data points.
          # @param timeout [Numeric]
          #   The default timeout, in seconds, for calls made through this client.
          # @param app_name [String]
          #   The codename of the calling service.
          # @param app_version [String]
          #   The version of the calling service.
          def initialize(
            service_path: SERVICE_ADDRESS,
            port: DEFAULT_SERVICE_PORT,
            channel: nil,
            chan_creds: nil,
            scopes: ALL_SCOPES,
            client_config: {},
            timeout: DEFAULT_TIMEOUT,
            app_name: 'gax',
            app_version: Google::Gax::VERSION)
            client_config_file = Pathname.new(__dir__).join(
              'library_service_client_config.json')
            @defaults = client_config_file.open do |f|
              Google::Gax.construct_settings(
                'google.example.library.v1.LibraryService',
                JSON.parse(f.read),
                client_config,
                Google::Gax::Grpc::STATUS_CODE_NAMES,
                timeout,
                bundle_descriptors: BUNDLE_DESCRIPTORS,
                page_descriptors: PAGE_DESCRIPTORS)
            end
            google_api_client = "#{app_name}/#{app_version} " \
              "#{CODE_GEN_NAME_VERSION} ruby/#{RUBY_VERSION}".freeze
            @headers = { :'x-goog-api-client' => google_api_client }
            @stub = Google::Gax::Grpc.create_stub(
              service_path,
              port,
              chan_creds: chan_creds,
              channel: channel,
              scopes: scopes,
              &Google::Example::Library::V1::LibraryService::Stub.method(:new)
            )
          end

          # Service calls

          # Creates a shelf, and returns the new Shelf.
          #
          # @param shelf [Google::Example::Library::V1::Shelf]
          #   The shelf to create.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Shelf]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def create_shelf(
            shelf,
            options: nil)
            req = Google::Example::Library::V1::CreateShelfRequest.new(
              shelf: shelf)
            settings = @defaults['create_shelf'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:create_shelf), settings)
            api_call.call(req, **@headers)
          end

          # Gets a shelf.
          #
          # @param name [String]
          #   The name of the shelf to retrieve.
          # @param message [Google::Example::Library::V1::SomeMessage]
          #   Field to verify that message-type query parameter gets flattened.
          # @param string_builder [Google::Example::Library::V1::StringBuilder]
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Shelf]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def get_shelf(
            name,
            message: nil,
            string_builder: nil,
            options: nil)
            req = Google::Example::Library::V1::GetShelfRequest.new(
              name: name,
              message: message,
              string_builder: string_builder)
            settings = @defaults['get_shelf'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:get_shelf), settings)
            api_call.call(req, **@headers)
          end

          # Lists shelves.
          #
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Gax::PagedEnumerable<Google::Example::Library::V1::Shelf>]
          #   An enumerable of Google::Example::Library::V1::Shelf instances.
          #   See Google::Gax::PagedEnumerable documentation for other
          #   operations such as per-page iteration or access to the response
          #   object.
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def list_shelves(
            options: nil)
            req = Google::Example::Library::V1::ListShelvesRequest.new
            settings = @defaults['list_shelves'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:list_shelves), settings)
            api_call.call(req, **@headers)
          end

          # Deletes a shelf.
          #
          # @param name [String]
          #   The name of the shelf to delete.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def delete_shelf(
            name,
            options: nil)
            req = Google::Example::Library::V1::DeleteShelfRequest.new(
              name: name)
            settings = @defaults['delete_shelf'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:delete_shelf), settings)
            api_call.call(req, **@headers)
          end

          # Merges two shelves by adding all books from the shelf named
          # +other_shelf_name+ to shelf +name+, and deletes
          # +other_shelf_name+. Returns the updated shelf.
          #
          # @param name [String]
          #   The name of the shelf we're adding books to.
          # @param other_shelf_name [String]
          #   The name of the shelf we're removing books from and deleting.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Shelf]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def merge_shelves(
            name,
            other_shelf_name,
            options: nil)
            req = Google::Example::Library::V1::MergeShelvesRequest.new(
              name: name,
              other_shelf_name: other_shelf_name)
            settings = @defaults['merge_shelves'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:merge_shelves), settings)
            api_call.call(req, **@headers)
          end

          # Creates a book.
          #
          # @param name [String]
          #   The name of the shelf in which the book is created.
          # @param book [Google::Example::Library::V1::Book]
          #   The book to create.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Book]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def create_book(
            name,
            book,
            options: nil)
            req = Google::Example::Library::V1::CreateBookRequest.new(
              name: name,
              book: book)
            settings = @defaults['create_book'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:create_book), settings)
            api_call.call(req, **@headers)
          end

          # Creates a series of books.
          #
          # @param shelf [Google::Example::Library::V1::Shelf]
          #   The shelf in which the series is created.
          # @param books [Array<Google::Example::Library::V1::Book>]
          #   The books to publish in the series.
          # @param edition [Integer]
          #   The edition of the series
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::PublishSeriesResponse]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def publish_series(
            shelf,
            books,
            edition: 0,
            options: nil)
            req = Google::Example::Library::V1::PublishSeriesRequest.new(
              shelf: shelf,
              books: books,
              edition: edition)
            settings = @defaults['publish_series'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:publish_series), settings)
            api_call.call(req, **@headers)
          end

          # Gets a book.
          #
          # @param name [String]
          #   The name of the book to retrieve.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Book]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def get_book(
            name,
            options: nil)
            req = Google::Example::Library::V1::GetBookRequest.new(
              name: name)
            settings = @defaults['get_book'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:get_book), settings)
            api_call.call(req, **@headers)
          end

          # Lists books in a shelf.
          #
          # @param name [String]
          #   The name of the shelf whose books we'd like to list.
          # @param filter [String]
          #   To test python built-in wrapping.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Gax::PagedEnumerable<Google::Example::Library::V1::Book>]
          #   An enumerable of Google::Example::Library::V1::Book instances.
          #   See Google::Gax::PagedEnumerable documentation for other
          #   operations such as per-page iteration or access to the response
          #   object.
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def list_books(
            name,
            filter: '',
            options: nil)
            req = Google::Example::Library::V1::ListBooksRequest.new(
              name: name,
              filter: filter)
            settings = @defaults['list_books'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:list_books), settings)
            api_call.call(req, **@headers)
          end

          # Deletes a book.
          #
          # @param name [String]
          #   The name of the book to delete.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def delete_book(
            name,
            options: nil)
            req = Google::Example::Library::V1::DeleteBookRequest.new(
              name: name)
            settings = @defaults['delete_book'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:delete_book), settings)
            api_call.call(req, **@headers)
          end

          # Updates a book.
          #
          # @param name [String]
          #   The name of the book to update.
          # @param book [Google::Example::Library::V1::Book]
          #   The book to update with.
          # @param update_mask [Google::Protobuf::FieldMask]
          #   A field mask to apply, rendered as an HTTP parameter.
          # @param physical_mask [Google::Example::Library::V1::FieldMask]
          #   To test Python import clash resolution.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Book]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def update_book(
            name,
            book,
            update_mask: nil,
            physical_mask: nil,
            options: nil)
            req = Google::Example::Library::V1::UpdateBookRequest.new(
              name: name,
              book: book,
              update_mask: update_mask,
              physical_mask: physical_mask)
            settings = @defaults['update_book'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:update_book), settings)
            api_call.call(req, **@headers)
          end

          # Moves a book to another shelf, and returns the new book.
          #
          # @param name [String]
          #   The name of the book to move.
          # @param other_shelf_name [String]
          #   The name of the destination shelf.
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Example::Library::V1::Book]
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def move_book(
            name,
            other_shelf_name,
            options: nil)
            req = Google::Example::Library::V1::MoveBookRequest.new(
              name: name,
              other_shelf_name: other_shelf_name)
            settings = @defaults['move_book'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:move_book), settings)
            api_call.call(req, **@headers)
          end

          # Lists a primitive resource. To test go page streaming.
          #
          # @param name [String]
          # @param options [Google::Gax::CallOptions]
          #   Overrides the default settings for this call, e.g, timeout,
          #   retries, etc.
          # @return [Google::Gax::PagedEnumerable<String>]
          #   An enumerable of String instances.
          #   See Google::Gax::PagedEnumerable documentation for other
          #   operations such as per-page iteration or access to the response
          #   object.
          # @raise [Google::Gax::GaxError] if the RPC is aborted.
          def list_strings(
            name: '',
            options: nil)
            req = Google::Example::Library::V1::ListStringsRequest.new(
              name: name)
            settings = @defaults['list_strings'].merge(options)
            api_call = Google::Gax.create_api_call(
              @stub.method(:list_strings), settings)
            api_call.call(req, **@headers)
          end
        end
      end
    end
  end
end
============== file: doc/field_mask.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Example
    module Library
      module V1
        # @!attribute [rw] materials
        #   @return [Array<Google::Example::Library::V1::FieldMask::Material>]
        class FieldMask
          module Material
            PAPIER_MACHE = 0

            WOOD = 1

            PORCELAIN = 2

            SEQUINS = 3

            CARDBOARD = 4
          end
        end
      end
    end
  end
end
============== file: doc/google/protobuf/any.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Protobuf
    # +Any+ contains an arbitrary serialized message along with a URL
    # that describes the type of the serialized message.
    #
    #
    # = JSON
    #
    # The JSON representation of an +Any+ value uses the regular
    # representation of the deserialized, embedded message, with an
    # additional field +@type+ which contains the type URL. Example:
    #
    #     package google.profile;
    #     message Person {
    #       string first_name = 1;
    #       string last_name = 2;
    #     }
    #
    #     {
    #       "@type": "type.googleapis.com/google.profile.Person",
    #       "firstName": <string>,
    #       "lastName": <string>
    #     }
    #
    # If the embedded message type is well-known and has a custom JSON
    # representation, that representation will be embedded adding a field
    # +value+ which holds the custom JSON in addition to the +@type+
    # field. Example (for message Google::Protobuf::Duration):
    #
    #     {
    #       "@type": "type.googleapis.com/google.protobuf.Duration",
    #       "value": "1.212s"
    #     }
    # @!attribute [rw] type_url
    #   @return [String]
    #     A URL/resource name whose content describes the type of the
    #     serialized message.
    #
    #     For URLs which use the schema +http+, +https+, or no schema, the
    #     following restrictions and interpretations apply:
    #
    #     * If no schema is provided, +https+ is assumed.
    #     * The last segment of the URL's path must represent the fully
    #       qualified name of the type (as in +path/google.protobuf.Duration+).
    #     * An HTTP GET on the URL must yield a Google::Protobuf::Type
    #       value in binary format, or produce an error.
    #     * Applications are allowed to cache lookup results based on the
    #       URL, or have them precompiled into a binary to avoid any
    #       lookup. Therefore, binary compatibility needs to be preserved
    #       on changes to types. (Use versioned type names to manage
    #       breaking changes.)
    #
    #     Schemas other than +http+, +https+ (or the empty schema) might be
    #     used with implementation specific semantics.
    # @!attribute [rw] value
    #   @return [String]
    #     Must be valid serialized data of the above specified type.
    class Any; end
  end
end
============== file: doc/google/protobuf/duration.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Protobuf
    # A Duration represents a signed, fixed-length span of time represented
    # as a count of seconds and fractions of seconds at nanosecond
    # resolution. It is independent of any calendar and concepts like "day"
    # or "month". It is related to Timestamp in that the difference between
    # two Timestamp values is a Duration and it can be added or subtracted
    # from a Timestamp. Range is approximately +-10,000 years.
    #
    # Example 1: Compute Duration from two Timestamps in pseudo code.
    #
    #     Timestamp start = ...;
    #     Timestamp end = ...;
    #     Duration duration = ...;
    #
    #     duration.seconds = end.seconds - start.seconds;
    #     duration.nanos = end.nanos - start.nanos;
    #
    #     if (duration.seconds < 0 && duration.nanos > 0) {
    #       duration.seconds += 1;
    #       duration.nanos -= 1000000000;
    #     } else if (durations.seconds > 0 && duration.nanos < 0) {
    #       duration.seconds -= 1;
    #       duration.nanos += 1000000000;
    #     }
    #
    # Example 2: Compute Timestamp from Timestamp + Duration in pseudo code.
    #
    #     Timestamp start = ...;
    #     Duration duration = ...;
    #     Timestamp end = ...;
    #
    #     end.seconds = start.seconds + duration.seconds;
    #     end.nanos = start.nanos + duration.nanos;
    #
    #     if (end.nanos < 0) {
    #       end.seconds -= 1;
    #       end.nanos += 1000000000;
    #     } else if (end.nanos >= 1000000000) {
    #       end.seconds += 1;
    #       end.nanos -= 1000000000;
    #     }
    # @!attribute [rw] seconds
    #   @return [Integer]
    #     Signed seconds of the span of time. Must be from -315,576,000,000
    #     to +315,576,000,000 inclusive.
    # @!attribute [rw] nanos
    #   @return [Integer]
    #     Signed fractions of a second at nanosecond resolution of the span
    #     of time. Durations less than one second are represented with a 0
    #     +seconds+ field and a positive or negative +nanos+ field. For durations
    #     of one second or more, a non-zero value for the +nanos+ field must be
    #     of the same sign as the +seconds+ field. Must be from -999,999,999
    #     to +999,999,999 inclusive.
    class Duration; end
  end
end
============== file: doc/google/protobuf/field_mask.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Protobuf
    # +FieldMask+ represents a set of symbolic field paths, for example:
    #
    #     paths: "f.a"
    #     paths: "f.b.d"
    #
    # Here +f+ represents a field in some root message, +a+ and +b+
    # fields in the message found in +f+, and +d+ a field found in the
    # message in +f.b+.
    #
    # Field masks are used to specify a subset of fields that should be
    # returned by a get operation or modified by an update operation.
    # Field masks also have a custom JSON encoding (see below).
    #
    # = Field Masks in Projections
    #
    # When used in the context of a projection, a response message or
    # sub-message is filtered by the API to only contain those fields as
    # specified in the mask. For example, if the mask in the previous
    # example is applied to a response message as follows:
    #
    #     f {
    #       a : 22
    #       b {
    #         d : 1
    #         x : 2
    #       }
    #       y : 13
    #     }
    #     z: 8
    #
    # The result will not contain specific values for fields x,y and z
    # (their value will be set to the default, and omitted in proto text
    # output):
    #
    #
    #     f {
    #       a : 22
    #       b {
    #         d : 1
    #       }
    #     }
    #
    # A repeated field is not allowed except at the last position of a
    # field mask.
    #
    # If a FieldMask object is not present in a get operation, the
    # operation applies to all fields (as if a FieldMask of all fields
    # had been specified).
    #
    # Note that a field mask does not necessarily applies to the
    # top-level response message. In case of a REST get operation, the
    # field mask applies directly to the response, but in case of a REST
    # list operation, the mask instead applies to each individual message
    # in the returned resource list. In case of a REST custom method,
    # other definitions may be used. Where the mask applies will be
    # clearly documented together with its declaration in the API.  In
    # any case, the effect on the returned resource/resources is required
    # behavior for APIs.
    #
    # = Field Masks in Update Operations
    #
    # A field mask in update operations specifies which fields of the
    # targeted resource are going to be updated. The API is required
    # to only change the values of the fields as specified in the mask
    # and leave the others untouched. If a resource is passed in to
    # describe the updated values, the API ignores the values of all
    # fields not covered by the mask.
    #
    # In order to reset a field's value to the default, the field must
    # be in the mask and set to the default value in the provided resource.
    # Hence, in order to reset all fields of a resource, provide a default
    # instance of the resource and set all fields in the mask, or do
    # not provide a mask as described below.
    #
    # If a field mask is not present on update, the operation applies to
    # all fields (as if a field mask of all fields has been specified).
    # Note that in the presence of schema evolution, this may mean that
    # fields the client does not know and has therefore not filled into
    # the request will be reset to their default. If this is unwanted
    # behavior, a specific service may require a client to always specify
    # a field mask, producing an error if not.
    #
    # As with get operations, the location of the resource which
    # describes the updated values in the request message depends on the
    # operation kind. In any case, the effect of the field mask is
    # required to be honored by the API.
    #
    # == Considerations for HTTP REST
    #
    # The HTTP kind of an update operation which uses a field mask must
    # be set to PATCH instead of PUT in order to satisfy HTTP semantics
    # (PUT must only be used for full updates).
    #
    # = JSON Encoding of Field Masks
    #
    # In JSON, a field mask is encoded as a single string where paths are
    # separated by a comma. Fields name in each path are converted
    # to/from lower-camel naming conventions.
    #
    # As an example, consider the following message declarations:
    #
    #     message Profile {
    #       User user = 1;
    #       Photo photo = 2;
    #     }
    #     message User {
    #       string display_name = 1;
    #       string address = 2;
    #     }
    #
    # In proto a field mask for +Profile+ may look as such:
    #
    #     mask {
    #       paths: "user.display_name"
    #       paths: "photo"
    #     }
    #
    # In JSON, the same mask is represented as below:
    #
    #     {
    #       mask: "user.displayName,photo"
    #     }
    # @!attribute [rw] paths
    #   @return [Array<String>]
    #     The set of field mask paths.
    class FieldMask; end
  end
end
============== file: doc/google/protobuf/timestamp.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Protobuf
    # A Timestamp represents a point in time independent of any time zone
    # or calendar, represented as seconds and fractions of seconds at
    # nanosecond resolution in UTC Epoch time. It is encoded using the
    # Proleptic Gregorian Calendar which extends the Gregorian calendar
    # backwards to year one. It is encoded assuming all minutes are 60
    # seconds long, i.e. leap seconds are "smeared" so that no leap second
    # table is needed for interpretation. Range is from
    # 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z.
    # By restricting to that range, we ensure that we can convert to
    # and from  RFC 3339 date strings.
    # See {https://www.ietf.org/rfc/rfc3339.txt}[https://www.ietf.org/rfc/rfc3339.txt].
    #
    # Example 1: Compute Timestamp from POSIX +time()+.
    #
    #     Timestamp timestamp;
    #     timestamp.set_seconds(time(NULL));
    #     timestamp.set_nanos(0);
    #
    # Example 2: Compute Timestamp from POSIX +gettimeofday()+.
    #
    #     struct timeval tv;
    #     gettimeofday(&tv, NULL);
    #
    #     Timestamp timestamp;
    #     timestamp.set_seconds(tv.tv_sec);
    #     timestamp.set_nanos(tv.tv_usec * 1000);
    #
    # Example 3: Compute Timestamp from Win32 +GetSystemTimeAsFileTime()+.
    #
    #     FILETIME ft;
    #     GetSystemTimeAsFileTime(&ft);
    #     UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;
    #
    #     // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z
    #     // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.
    #     Timestamp timestamp;
    #     timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));
    #     timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));
    #
    # Example 4: Compute Timestamp from Java +System.currentTimeMillis()+.
    #
    #     long millis = System.currentTimeMillis();
    #
    #     Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)
    #         .setNanos((int) ((millis % 1000) * 1000000)).build();
    #
    #
    # Example 5: Compute Timestamp from current time in Python.
    #
    #     now = time.time()
    #     seconds = int(now)
    #     nanos = int((now - seconds) * 10**9)
    #     timestamp = Timestamp(seconds=seconds, nanos=nanos)
    # @!attribute [rw] seconds
    #   @return [Integer]
    #     Represents seconds of UTC time since Unix epoch
    #     1970-01-01T00:00:00Z. Must be from from 0001-01-01T00:00:00Z to
    #     9999-12-31T23:59:59Z inclusive.
    # @!attribute [rw] nanos
    #   @return [Integer]
    #     Non-negative fractions of a second at nanosecond resolution. Negative
    #     second values with fractions must still have non-negative nanos values
    #     that count forward in time. Must be from 0 to 999,999,999
    #     inclusive.
    class Timestamp; end
  end
end
============== file: doc/google/protobuf/wrappers.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Protobuf
    # Wrapper message for +double+.
    #
    # The JSON representation for +DoubleValue+ is JSON number.
    # @!attribute [rw] value
    #   @return [Float]
    #     The double value.
    class DoubleValue; end

    # Wrapper message for +float+.
    #
    # The JSON representation for +FloatValue+ is JSON number.
    # @!attribute [rw] value
    #   @return [Float]
    #     The float value.
    class FloatValue; end

    # Wrapper message for +int64+.
    #
    # The JSON representation for +Int64Value+ is JSON string.
    # @!attribute [rw] value
    #   @return [Integer]
    #     The int64 value.
    class Int64Value; end

    # Wrapper message for +uint64+.
    #
    # The JSON representation for +UInt64Value+ is JSON string.
    # @!attribute [rw] value
    #   @return [Integer]
    #     The uint64 value.
    class UInt64Value; end

    # Wrapper message for +int32+.
    #
    # The JSON representation for +Int32Value+ is JSON number.
    # @!attribute [rw] value
    #   @return [Integer]
    #     The int32 value.
    class Int32Value; end

    # Wrapper message for +uint32+.
    #
    # The JSON representation for +UInt32Value+ is JSON number.
    # @!attribute [rw] value
    #   @return [Integer]
    #     The uint32 value.
    class UInt32Value; end

    # Wrapper message for +bool+.
    #
    # The JSON representation for +BoolValue+ is JSON +true+ and +false+.
    # @!attribute [rw] value
    #   @return [true, false]
    #     The bool value.
    class BoolValue; end

    # Wrapper message for +string+.
    #
    # The JSON representation for +StringValue+ is JSON string.
    # @!attribute [rw] value
    #   @return [String]
    #     The string value.
    class StringValue; end

    # Wrapper message for +bytes+.
    #
    # The JSON representation for +BytesValue+ is JSON string.
    # @!attribute [rw] value
    #   @return [String]
    #     The bytes value.
    class BytesValue; end
  end
end
============== file: doc/library.rb ==============
# Copyright 2016 Google Inc. All rights reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

module Google
  module Example
    module Library
      module V1
        # A single book in the library.
        # @!attribute [rw] name
        #   @return [String]
        #     The resource name of the book.
        #     Book names have the form +shelves/{shelf_id}/books/{book_id}+.
        # @!attribute [rw] author
        #   @return [String]
        #     The name of the book author.
        # @!attribute [rw] title
        #   @return [String]
        #     The title of the book.
        # @!attribute [rw] read
        #   @return [true, false]
        #     Value indicating whether the book has been read.
        # @!attribute [rw] rating
        #   @return [Google::Example::Library::V1::Book::Rating]
        #     For testing enums.
        # @!attribute [rw] any_value
        #   @return [Google::Protobuf::Any]
        #     For testing all well-known types.
        # @!attribute [rw] struct_value
        #   @return [Google::Protobuf::Struct]
        # @!attribute [rw] value_value
        #   @return [Google::Protobuf::Value]
        # @!attribute [rw] list_value_value
        #   @return [Google::Protobuf::ListValue]
        # @!attribute [rw] map_list_value_value
        #   @return [Hash{String => Google::Protobuf::ListValue}]
        # @!attribute [rw] time_value
        #   @return [Google::Protobuf::Timestamp]
        # @!attribute [rw] duration_value
        #   @return [Google::Protobuf::Duration]
        # @!attribute [rw] field_mask_value
        #   @return [Google::Protobuf::FieldMask]
        # @!attribute [rw] int32_value
        #   @return [Google::Protobuf::Int32Value]
        # @!attribute [rw] uint32_value
        #   @return [Google::Protobuf::UInt32Value]
        # @!attribute [rw] int64_value
        #   @return [Google::Protobuf::Int64Value]
        # @!attribute [rw] uint64_value
        #   @return [Google::Protobuf::UInt64Value]
        # @!attribute [rw] float_value
        #   @return [Google::Protobuf::FloatValue]
        # @!attribute [rw] double_value
        #   @return [Google::Protobuf::DoubleValue]
        # @!attribute [rw] string_value
        #   @return [Google::Protobuf::StringValue]
        # @!attribute [rw] bool_value
        #   @return [Google::Protobuf::BoolValue]
        # @!attribute [rw] bytes_value
        #   @return [Google::Protobuf::BytesValue]
        # @!attribute [rw] map_string_value
        #   @return [Hash{Integer => String}]
        # @!attribute [rw] map_message_value
        #   @return [Hash{String => Google::Example::Library::V1::SomeMessage}]
        class Book
          module Rating
            # GOOD enum description
            GOOD = 0

            BAD = 1
          end
        end

        # @!attribute [rw] field
        #   @return [Integer]
        # @!attribute [rw] field2
        #   @return [Google::Example::Library::V1::SomeMessage2]
        class SomeMessage; end

        # @!attribute [rw] field1
        #   @return [Integer]
        class SomeMessage2; end

        # A Shelf contains a collection of books with a theme.
        # @!attribute [rw] name
        #   @return [String]
        #     The resource name of the shelf.
        #     Shelf names have the form +shelves/{shelf_id}+.
        # @!attribute [rw] theme
        #   @return [String]
        #     The theme of the shelf
        # @!attribute [rw] internal_theme
        #   @return [String]
        #     Internal theme that is visible to trusted testers only.
        class Shelf; end

        # Request message for LibraryService.CreateShelf.
        # @!attribute [rw] shelf
        #   @return [Google::Example::Library::V1::Shelf]
        #     The shelf to create.
        class CreateShelfRequest; end

        # Request message for LibraryService.GetShelf.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the shelf to retrieve.
        # @!attribute [rw] message
        #   @return [Google::Example::Library::V1::SomeMessage]
        #     Field to verify that message-type query parameter gets flattened.
        # @!attribute [rw] string_builder
        #   @return [Google::Example::Library::V1::StringBuilder]
        class GetShelfRequest; end

        # Creates a name conflict with java.lang type
        # @!attribute [rw] name
        #   @return [String]
        class StringBuilder; end

        # Request message for LibraryService.ListShelves.
        # @!attribute [rw] page_size
        #   @return [Integer]
        #     Requested page size. Server may return fewer shelves than requested.
        #     If unspecified, server will pick an appropriate default.
        # @!attribute [rw] page_token
        #   @return [String]
        #     A token identifying a page of results the server should return.
        #     Typically, this is the value of
        #     ListShelvesResponse#next_page_token
        #     returned from the previous call to +ListShelves+ method.
        class ListShelvesRequest; end

        # Request message for LibraryService.ListShelves.
        # @!attribute [rw] shelves
        #   @return [Array<Google::Example::Library::V1::Shelf>]
        #     The list of shelves.
        # @!attribute [rw] next_page_token
        #   @return [String]
        #     A token to retrieve next page of results.
        #     Pass this value in the
        #     ListShelvesRequest#page_token
        #     field in the subsequent call to +ListShelves+ method to retrieve the next
        #     page of results.
        class ListShelvesResponse; end

        # Request message for LibraryService.DeleteShelf.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the shelf to delete.
        class DeleteShelfRequest; end

        # Describes the shelf being removed (other_shelf_name) and updated
        # (name) in this merge.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the shelf we're adding books to.
        # @!attribute [rw] other_shelf_name
        #   @return [String]
        #     The name of the shelf we're removing books from and deleting.
        class MergeShelvesRequest; end

        # Request message for LibraryService.CreateBook.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the shelf in which the book is created.
        # @!attribute [rw] book
        #   @return [Google::Example::Library::V1::Book]
        #     The book to create.
        class CreateBookRequest; end

        # Request message for LibraryService.PublishSeries.
        # @!attribute [rw] shelf
        #   @return [Google::Example::Library::V1::Shelf]
        #     The shelf in which the series is created.
        # @!attribute [rw] books
        #   @return [Array<Google::Example::Library::V1::Book>]
        #     The books to publish in the series.
        # @!attribute [rw] edition
        #   @return [Integer]
        #     The edition of the series
        class PublishSeriesRequest; end

        # Response message for LibraryService.PublishSeries.
        # @!attribute [rw] book_names
        #   @return [Array<String>]
        #     The names of the books in the series that were published
        class PublishSeriesResponse; end

        # Request message for LibraryService.GetBook.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the book to retrieve.
        class GetBookRequest; end

        # Request message for LibraryService.ListBooks.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the shelf whose books we'd like to list.
        # @!attribute [rw] page_size
        #   @return [Integer]
        #     Requested page size. Server may return fewer books than requested.
        #     If unspecified, server will pick an appropriate default.
        # @!attribute [rw] page_token
        #   @return [String]
        #     A token identifying a page of results the server should return.
        #     Typically, this is the value of
        #     ListBooksResponse#next_page_token.
        #     returned from the previous call to +ListBooks+ method.
        # @!attribute [rw] filter
        #   @return [String]
        #     To test python built-in wrapping.
        class ListBooksRequest; end

        # Response message for LibraryService.ListBooks.
        # @!attribute [rw] books
        #   @return [Array<Google::Example::Library::V1::Book>]
        #     The list of books.
        # @!attribute [rw] next_page_token
        #   @return [String]
        #     A token to retrieve next page of results.
        #     Pass this value in the
        #     ListBooksRequest#page_token
        #     field in the subsequent call to +ListBooks+ method to retrieve the next
        #     page of results.
        class ListBooksResponse; end

        # Request message for LibraryService.UpdateBook.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the book to update.
        # @!attribute [rw] book
        #   @return [Google::Example::Library::V1::Book]
        #     The book to update with.
        # @!attribute [rw] update_mask
        #   @return [Google::Protobuf::FieldMask]
        #     A field mask to apply, rendered as an HTTP parameter.
        # @!attribute [rw] physical_mask
        #   @return [Google::Example::Library::V1::FieldMask]
        #     To test Python import clash resolution.
        class UpdateBookRequest; end

        # Request message for LibraryService.DeleteBook.
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the book to delete.
        class DeleteBookRequest; end

        # Describes what book to move (name) and what shelf we're moving it
        # to (other_shelf_name).
        # @!attribute [rw] name
        #   @return [String]
        #     The name of the book to move.
        # @!attribute [rw] other_shelf_name
        #   @return [String]
        #     The name of the destination shelf.
        class MoveBookRequest; end

        # @!attribute [rw] name
        #   @return [String]
        # @!attribute [rw] page_size
        #   @return [Integer]
        # @!attribute [rw] page_token
        #   @return [String]
        class ListStringsRequest; end

        # @!attribute [rw] strings
        #   @return [Array<String>]
        # @!attribute [rw] next_page_token
        #   @return [String]
        class ListStringsResponse; end
      end
    end
  end
end
============== file: library_service_client_config.json ==============
{
  "interfaces": {
    "google.example.library.v1.LibraryService": {
      "retry_codes": {
        "retry_codes_def": {
          "idempotent": [
            "DEADLINE_EXCEEDED",
            "UNAVAILABLE"
          ],
          "non_idempotent": []
        }
      },
      "retry_params": {
        "default": {
          "initial_retry_delay_millis": 100,
          "retry_delay_multiplier": 1.2,
          "max_retry_delay_millis": 1000,
          "initial_rpc_timeout_millis": 300,
          "rpc_timeout_multiplier": 1.3,
          "max_rpc_timeout_millis": 3000,
          "total_timeout_millis": 30000
        }
      },
      "methods": {
        "CreateShelf": {
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "GetShelf": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "ListShelves": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "DeleteShelf": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "MergeShelves": {
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "CreateBook": {
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "PublishSeries": {
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default",
          "bundling": {
            "element_count_threshold": 6,
            "element_count_limit": 7,
            "request_byte_threshold": 100000,
            "request_byte_limit": 150000,
            "delay_threshold_millis": 500
          }
        },
        "GetBook": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "ListBooks": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "DeleteBook": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "UpdateBook": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        },
        "MoveBook": {
          "retry_codes_name": "non_idempotent",
          "retry_params_name": "default"
        },
        "ListStrings": {
          "retry_codes_name": "idempotent",
          "retry_params_name": "default"
        }
      }
    }
  }
}

